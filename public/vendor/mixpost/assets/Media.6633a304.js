import{i as j,I as C,N as y,R as O,c as D,a as t,b as l,e as _,w as a,cz as z,F as P,o as c,Z as A,r as E,g as p,f as i,t as r,O as F,S as T,a5 as M,V as R,j as Y,Y as Z,al as q}from"./app.3dbb9f4f.js";import{u as G}from"./usePostVersions.f18e2fc4.js";import{u as H,_ as J,a as K,b as Q}from"./MediaGifs.98eb8be9.js";import{_ as U}from"./PageHeader.5278f6a5.js";import{T as W,_ as X}from"./Tab.87218907.js";import{_ as ee}from"./SelectableBar.3cd2e649.js";import{_ as se}from"./PureDangerButton.aa10c267.js";import{_ as te}from"./Panel.1435ce07.js";import{T as ae}from"./Trash.108c227d.js";import"./index.browser.8e74d592.js";import"./Masonry.1a75e465.js";import"./MediaFile.dd3a1c78.js";import"./ExclamationCircle.5d8a3fe5.js";import"./SectionTitle.453db892.js";import"./SearchInput.2b4b1fa0.js";import"./NoResult.f7bfb2e6.js";import"./Alert.68363348.js";import"./Flex.781629fc.js";const oe={class:"w-full mx-auto row-py mb-2xl"},le={class:"w-full row-px"},ie={class:"w-full row-px mt-lg"},Te={__name:"Media",setup(re){const v=j("workspaceCtx"),{activeTab:n,tabs:V,isDownloading:$,isDeleting:w,downloadExternal:x,deletePermanently:I}=H("br.media.fetchStock",{workspace:v.id}),L={uploads:J,stock:K,gifs:Q},d=C(),N=y(()=>L[n.value]),u=y(()=>d.value?d.value.selected:[]),k=()=>{d.value.deselectAll()},h=()=>{const e=n.value!=="uploads";e&&x(u.value.map(s=>{const{id:f,url:o,download_data:b}=s;return{id:f,url:o,download_data:b}}),s=>{g(s.data)}),e||g(u.value)},{versionContentObject:B}=G(),g=e=>{q.post(route("br.posts.store",{workspace:v.id}),{versions:[{account_id:0,is_original:!0,content:[B("",e.map(s=>s.id))]}]})},m=C(!1),S=()=>{const e=u.value.map(s=>s.id);I(e,()=>{k(),d.value.removeItems(e),m.value=!1})};return(e,s)=>{const f=O("tooltip");return c(),D(P,null,[t(l(A),{title:e.$t("media.media_library")},null,8,["title"]),_("div",oe,[t(U,{title:e.$t("media.media_library")},null,8,["title"]),_("div",le,[t(W,null,{default:a(()=>[(c(!0),D(P,null,E(l(V),o=>(c(),p(X,{key:o,onClick:b=>n.value=o,active:l(n)===o},{default:a(()=>[i(r(e.$t(`media.${o}`)),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),_("div",ie,[t(te,null,{default:a(()=>[(c(),p(F(N.value),{ref_key:"sourceProperties",ref:d,columns:4},null,512)),t(ee,{count:u.value.length,onClose:s[1]||(s[1]=o=>k())},{default:a(()=>[t(T,{onClick:h,isLoading:l($),disabled:l($),class:"mr-sm",size:"xs"},{default:a(()=>[t(M,{class:"mr-xs"}),i(" "+r(e.$t("media.create_post")),1)]),_:1},8,["isLoading","disabled"]),l(n)==="uploads"?R((c(),p(se,{key:0,onClick:s[0]||(s[0]=o=>m.value=!0)},{default:a(()=>[t(ae)]),_:1})),[[f,e.$t("general.delete")]]):Y("",!0)]),_:1},8,["count"])]),_:1})])]),t(z,{show:m.value,variant:"danger",onClose:s[3]||(s[3]=o=>m.value=!1)},{header:a(()=>[i(r(e.$t("media.delete_media")),1)]),body:a(()=>[i(r(e.$t("media.do_you_want_delete")),1)]),footer:a(()=>[t(T,{onClick:s[2]||(s[2]=o=>m.value=!1),class:"mr-xs"},{default:a(()=>[i(r(e.$t("general.cancel")),1)]),_:1}),t(Z,{isLoading:l(w),disabled:l(w),onClick:S},{default:a(()=>[i(r(e.$t("general.delete")),1)]),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64)}}};export{Te as default};
