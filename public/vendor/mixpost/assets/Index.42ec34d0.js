import{u as S,i as g,I as U,T as P,o as p,c as b,a as e,w as s,a5 as M,f as a,S as I,V as j,e as _,cn as L,b as t,t as l,j as O,k as R,ac as B,F as V,n as E,R as q,g as C,r as z,cs as W,an as Z,ah as G,ag as N,ak as H,l as J,al as K,Z as Q}from"./app.3dbb9f4f.js";import{_ as X}from"./PageHeader.5278f6a5.js";import{T as Y}from"./Trash.108c227d.js";import{_ as ee}from"./NoResult.f7bfb2e6.js";import{_ as se}from"./DropdownButton.3e12eb5b.js";import{_ as te}from"./Panel.1435ce07.js";import{a as T,_ as u,T as ae}from"./TableCell.4ea0e0fc.js";import{_ as A}from"./UserRole.dfe6aafa.js";import{E as oe}from"./Eye.96ec91e4.js";import{_ as le}from"./PureButtonLink.52cd3818.js";import"./Flex.781629fc.js";import"./EllipsisVertical.6eb78bb2.js";import"./Radio.02f44a14.js";const re={key:0,class:"text-red-500"},ne={__name:"AttachUserInvite",props:{workspace:{type:Object},attachedUsers:{type:Array,default:[]}},setup(m){const{t:o}=S();g("routePrefix");const{notify:x}=E(),y=m,f=U(null),h=U(null),n=P({email:null,role:"admin",type:"workspace",name:null}),d=()=>{n.transform($=>({...$,email:f.value,name:h.value})).post(route("br.members.store",{workspace:y.workspace.uuid}),{preserveScroll:!0,onSuccess(){k(),n.reset(),x("success","Invite sent successfully")}})},v=U(!1),w=()=>{v.value=!0},k=()=>{v.value=!1,f.value=null};return($,r)=>(p(),b(V,null,[e(I,{onClick:w,size:"sm"},{default:s(()=>[e(M,{class:"mr-xs"}),a(" Invite members ")]),_:1}),e(B,{show:v.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:k},{header:s(()=>[a(" Invite members ")]),body:s(()=>[j(_("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=c=>h.value=c),placeholder:"Enter Full name",style:{width:"100%",border:"1px solid #ccc","border-radius":"10px",padding:"10px","margin-bottom":"5px"},required:""},null,512),[[L,h.value]]),j(_("input",{type:"email","onUpdate:modelValue":r[1]||(r[1]=c=>f.value=c),placeholder:"Enter email address",style:{width:"100%",border:"1px solid #ccc","border-radius":"10px",padding:"10px"},required:""},null,512),[[L,f.value]]),t(n).errors.email?(p(),b("div",re,l(t(n).errors.email),1)):O("",!0),e(A,{modelValue:t(n).role,"onUpdate:modelValue":r[2]||(r[2]=c=>t(n).role=c),class:"mt-lg"},null,8,["modelValue"])]),footer:s(()=>[e(I,{onClick:k,class:"mr-xs"},{default:s(()=>[a(l(t(o)("general.cancel")),1)]),_:1}),e(R,{onClick:d,disabled:!f.value||!h.value||t(n).processing,isLoading:t(n).processing},{default:s(()=>[a(" Invite ")]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},ce={class:"flex justify-start"},ie={class:"capitalize"},ue={class:"flex justify-end"},de={__name:"WorkspaceUsersInvite",props:{workspace:{type:Object}},setup(m){const{t:o}=S(),x=g("routePrefix"),y=g("confirmation"),{notify:f}=E(),h=m,n=U(null),d=P({user_id:null,role:"admin"}),v=r=>{d.user_id=r.id,d.role=r.pivot.role,n.value=r},w=()=>{n.value=null,d.reset()},k=r=>{y().title("Detach user").description(`Are you sure you want to detach <strong>${r.name}</strong> from <strong>${h.workspace.name}</strong>?`).destructive().btnConfirmName(o("general.detach")).onConfirm(c=>{c.isLoading(!0),K.delete(route("br.workspaces.users.delete",{workspace:h.workspace.uuid}),{data:{user_id:r.id},preserveScroll:!0,onSuccess(){c.reset(),f("success",o("team.user_detached"))},onFinish(){c.isLoading(!1)}})}).show()},$=()=>{d.put(route("br.workspaces.users.update",{workspace:h.workspace.uuid}),{preserveScroll:!0,onSuccess(){d.reset(),w(),f("success",o("team.role_updated"))}})};return(r,c)=>{const D=q("tooltip");return p(),b(V,null,[e(te,null,{title:s(()=>[a("Users")]),action:s(()=>[e(ne,{workspace:m.workspace,attachedUsers:m.workspace.users.map(i=>i.id)},null,8,["workspace","attachedUsers"])]),default:s(()=>[m.workspace.users.length?(p(),C(ae,{key:0},{head:s(()=>[e(T,null,{default:s(()=>[e(u,{component:"th",scope:"col"}),e(u,{component:"th",scope:"col"},{default:s(()=>[a(l(t(o)("general.name")),1)]),_:1}),e(u,{component:"th",scope:"col"},{default:s(()=>[a(l(t(o)("general.email")),1)]),_:1}),e(u,{component:"th",scope:"col"},{default:s(()=>[a(l(t(o)("team.role")),1)]),_:1}),e(u,{component:"th",scope:"col"},{default:s(()=>[a(l(t(o)("team.attached_at")),1)]),_:1}),e(u,{component:"th",scope:"col"})]),_:1})]),body:s(()=>[(p(!0),b(V,null,z(t(J.exports.sortBy)(m.workspace.users,"pivot.joined_at"),i=>(p(),C(T,{key:m.workspace.id,hoverable:!0},{default:s(()=>[e(u,{align:"left"},{default:s(()=>[_("div",ce,[e(W,{name:i.name},null,8,["name"])])]),_:2},1024),e(u,null,{default:s(()=>[a(l(i.name),1)]),_:2},1024),e(u,null,{default:s(()=>[a(l(i.email),1)]),_:2},1024),e(u,null,{default:s(()=>[e(Z,null,{default:s(()=>[_("span",ie,l(i.pivot.role),1)]),_:2},1024)]),_:2},1024),e(u,null,{default:s(()=>[a(l(i.pivot.joined_at),1)]),_:2},1024),e(u,{align:"right"},{default:s(()=>[_("div",ue,[j((p(),C(le,{href:r.route(`${t(x)}.users.view`,{user:i.id}),class:"mr-xs"},{default:s(()=>[e(oe)]),_:2},1032,["href"])),[[D,t(o)("general.view")]]),e(G,{"width-classes":"w-32",placement:"bottom-end"},{trigger:s(()=>[e(se)]),content:s(()=>[e(N,{onClick:F=>v(i),as:"button"},{default:s(()=>[e(H,{class:"mr-xs"}),a(" "+l(t(o)("team.edit_role")),1)]),_:2},1032,["onClick"]),e(N,{onClick:F=>k(i),as:"button"},{default:s(()=>[e(Y,{class:"text-red-500 mr-xs"}),a(" "+l(t(o)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(p(),C(ee,{key:1}))]),_:1}),e(B,{show:n.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:w},{header:s(()=>[a(l(t(o)("team.edit_role_for"))+" ",1),_("strong",null,l(n.value.name),1)]),body:s(()=>[e(A,{modelValue:t(d).role,"onUpdate:modelValue":c[0]||(c[0]=i=>t(d).role=i),class:"mt-lg"},null,8,["modelValue"])]),footer:s(()=>[e(I,{onClick:w,class:"mr-xs"},{default:s(()=>[a(l(t(o)("general.cancel")),1)]),_:1}),e(R,{onClick:$,disabled:t(d).processing,isLoading:t(d).processing},{default:s(()=>[a(l(t(o)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},me={class:"w-full mx-auto row-py"},pe={class:"row-px"},_e={class:"mt-lg"},Ie={__name:"Index",props:{workspace:{type:Object}},setup(m){const{t:o}=S();return g("routePrefix"),g("confirmation"),(x,y)=>(p(),b(V,null,[e(t(Q),{title:t(o)("workspace.view_workspace")},null,8,["title"]),_("div",me,[e(X,{title:"Workspace members"},{description:s(()=>[a(" Manage workspace users ")]),_:1}),_("div",pe,[_("div",_e,[e(de,{workspace:m.workspace},null,8,["workspace"])])])])],64))}};export{Ie as default};
