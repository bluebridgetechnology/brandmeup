import{i as m,I as _,J as y,af as C,l as v,al as x,c as p,a as s,b as j,e as r,w as a,j as k,F as $,o,Z as B,f,t as u,r as D,g as w}from"./app.3dbb9f4f.js";import{u as N}from"./useRouter.19704d13.js";import{_ as O}from"./PageHeader.5278f6a5.js";import{_ as V}from"./WebhookAction.dfd77dfd.js";import{_ as I}from"./Panel.1435ce07.js";import{_ as S}from"./Flex.781629fc.js";import{_ as T}from"./Pagination.b044d7e9.js";import{_ as F}from"./NoResult.f7bfb2e6.js";import{_ as P,a as q}from"./WebhookDeliveryItemView.ecf5c17b.js";import{T as E,_ as h}from"./Tab.87218907.js";import"./Trash.108c227d.js";import"./QueueList.71914ee1.js";import"./ChevronLeft.cbb2bb07.js";import"./Clock.25c8faac.js";import"./SectionTitle.453db892.js";import"./SectionBorder.96a5b39e.js";import"./Refresh.1865b3fa.js";const J={class:"w-full mx-auto row-py"},L={class:"text-gray-500"},M={class:"row-px"},R={class:"w-full mt-lg"},W={class:"w-full md:w-1/2 border-r border-gray-100"},Z={class:"w-full md:w-1/2"},z={key:0,class:"mt-lg"},ue={__name:"WebhookDeliveries",props:{filter:{type:Object,default:{}},webhook:{type:Object,required:!0},deliveries:{type:Object}},setup(e){const c=e;m("routePrefix");const g=m("workspaceCtx");m("confirmation"),m("authPasswordConfirmation"),N();const n=_({status:c.filter.status}),d=_(null);y(()=>{c.deliveries.data.length&&b(c.deliveries.data[0])});const b=t=>{d.value=t};return C(()=>v.exports.cloneDeep(n.value),v.exports.throttle(()=>{x.get(route("br.webhooks.deliveries.index",{workspace:g.id,webhook:c.webhook.id}),v.exports.pickBy(n.value),{preserveState:!0,preserveScroll:!0,only:["deliveries","filter"]})},300)),(t,i)=>(o(),p($,null,[s(j(B),{title:t.$t("webhook.deliveries")},null,8,["title"]),r("div",J,[s(O,{title:t.$t("webhook.deliveries")},{description:a(()=>[f(u(e.webhook.name)+" ",1),r("div",L,u(e.webhook.callback_url),1)]),default:a(()=>[s(V,{record:e.webhook,create:!1,deliveries:!1},null,8,["record"])]),_:1},8,["title"]),r("div",M,[r("div",R,[s(E,null,{default:a(()=>[s(h,{onClick:i[0]||(i[0]=l=>n.value.status=null),active:!t.$page.props.filter.status},{default:a(()=>[f(u(t.$t("general.all")),1)]),_:1},8,["active"]),s(h,{onClick:i[1]||(i[1]=l=>n.value.status="success"),active:t.$page.props.filter.status==="success"},{default:a(()=>[f(u(t.$t("general.succeeded")),1)]),_:1},8,["active"]),s(h,{onClick:i[2]||(i[2]=l=>n.value.status="error"),active:t.$page.props.filter.status==="error"},{default:a(()=>[f(u(t.$t("general.failed")),1)]),_:1},8,["active"])]),_:1})]),s(I,{class:"mt-lg","with-padding":!1},{default:a(()=>[s(S,{gap:"gap-0"},{default:a(()=>[r("div",W,[(o(!0),p($,null,D(e.deliveries.data,l=>(o(),w(P,{key:l.id,item:l,active:d.value&&d.value.id===l.id,onClick:A=>b(l)},null,8,["item","active","onClick"]))),128)),e.deliveries.meta.total?k("",!0):(o(),w(F,{key:0,class:"py-md px-md"}))]),r("div",Z,[d.value?(o(),w(q,{key:0,webhookId:e.webhook.id,delivery:d.value},null,8,["webhookId","delivery"])):k("",!0)])]),_:1})]),_:1}),e.deliveries.meta.links.length>3?(o(),p("div",z,[s(T,{meta:e.deliveries.meta,links:e.deliveries.links},null,8,["meta","links"])])):k("",!0)])])],64))}};export{ue as default};
