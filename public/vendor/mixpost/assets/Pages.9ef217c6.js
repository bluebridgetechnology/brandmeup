import{u as U,i as S,I as E,R as G,o as m,c as V,e as p,V as M,b as a,g as v,w as e,a as t,ag as q,ak as X,f as o,t as r,ah as Y,al as J,cp as O,n as j,A as ee,an as A,a6 as te,T as ae,ap as L,$ as w,S as N,j as Q,ab as I,ac as se,F as R,d as le,J as oe,ae as re,af as ne,Z as ie,h as ue,k as de,aE as B,r as ce}from"./app.3dbb9f4f.js";import{_ as me}from"./Admin.8227e551.js";import{u as _e}from"./useSelectable.1e30f95c.js";import{_ as fe}from"./PageHeader.5278f6a5.js";import{_ as pe}from"./PureDangerButton.aa10c267.js";import{_ as ge}from"./Panel.1435ce07.js";import{_ as T}from"./Checkbox.1a8805b0.js";import{_ as c,a as Z,T as he}from"./TableCell.4ea0e0fc.js";import{_ as $e}from"./SelectableBar.3cd2e649.js";import{_ as be}from"./NoResult.f7bfb2e6.js";import{T as z}from"./Trash.108c227d.js";import{_ as ve}from"./DropdownButton.3e12eb5b.js";import{_ as ke}from"./PureButtonLink.52cd3818.js";import{A as xe}from"./ArrowTopRightOnSquare.9c303ffa.js";import{V as P}from"./VerticalGroup.1aa58a90.js";import{_ as D}from"./LabelSuffix.6a36f138.js";import{_ as F}from"./SuccessButton.4819957a.js";import{_ as ye}from"./UploadButton.7cbd1b3f.js";import{_ as we}from"./Flex.781629fc.js";import"./QueueList.71914ee1.js";import"./EllipsisVertical.6eb78bb2.js";const Pe={class:"flex flex-row items-center justify-end gap-xs"},Se={__name:"PageItemAction",props:{itemId:{type:String,required:!0},urlPath:{type:String,required:!0}},emits:["onDelete"],setup(n,{emit:s}){const{t:d}=U(),_=S("routePrefix"),k=S("confirmation"),h=n,y=s,{notify:g}=j(),l=E(!1),b=()=>{k().title(d("page.delete_pages")).description(d("page.confirm_delete_pages")).destructive().onConfirm(f=>{f.isLoading(!0),J.delete(route(`${_}.pages.delete`,{page:h.itemId}),{onSuccess(){l.value=!1,g("success",d("page.page_deleted")),y("onDelete"),O.emit("pageDelete",h.itemId),f.reset()},onFinish(){f.close()}})}).show()};return(f,u)=>{const i=G("tooltip");return m(),V("div",null,[p("div",Pe,[M((m(),v(ke,{href:f.route(`${a(_)}.pages.show`,{slug:n.urlPath}),native:!0,target:"_blank"},{default:e(()=>[t(xe)]),_:1},8,["href"])),[[i,a(d)("general.open")]]),t(Y,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ve)]),content:e(()=>[t(q,{href:f.route(`${a(_)}.pages.edit`,{page:n.itemId})},{default:e(()=>[t(X,{class:"mr-xs"}),o(" "+r(a(d)("general.edit")),1)]),_:1},8,["href"]),t(q,{onClick:b,as:"button"},{default:e(()=>[t(z,{class:"text-red-500 mr-xs"}),o(" "+r(a(d)("general.delete")),1)]),_:1})]),_:1})])])}}},Ve={__name:"PageItem",props:{item:{type:Object,required:!0}},setup(n){return(s,d)=>(m(),v(Z,{hoverable:!0},{default:e(()=>[t(c,{class:"w-10"},{default:e(()=>[ee(s.$slots,"checkbox")]),_:3}),t(c,null,{default:e(()=>[o(r(n.item.name),1)]),_:1}),t(c,null,{default:e(()=>[o(r(n.item.slug),1)]),_:1}),t(c,null,{default:e(()=>[n.item.status?(m(),v(A,{key:0,variant:"success"},{default:e(()=>[o(r(s.$t("general.enabled")),1)]),_:1})):(m(),v(A,{key:1,variant:"error"},{default:e(()=>[o(r(s.$t("general.disabled")),1)]),_:1}))]),_:1}),t(c,null,{default:e(()=>[o(r(n.item.created_at),1)]),_:1}),t(c,null,{default:e(()=>[t(Se,{itemId:n.item.uuid,urlPath:n.item.url_path},null,8,["itemId","urlPath"])]),_:1})]),_:3}))}},Ce={for:"brand_name"},Ie=["src"],De={for:"brand_name"},Oe={for:"email"},Re={for:"register_url"},Te={class:"ml-xs"},Ue={__name:"GeneratePageSamples",setup(n){const{t:s}=U(),d=S("routePrefix"),_=E(!1),k=()=>{_.value=!0},h=()=>{_.value=!1},{user:y}=te(),{notify:g}=j(),l=ae({logo_url:L().props.mixpost.theme.logo,brand_name:L().props.app.name,email:y.value.email,register_url:"",destroy:!1}),b=()=>{l.post(route(`${d}.pages.generateSamples`),{preserveScroll:!0,onSuccess(){g("success",s("page.sample_pages_generated")),h(),l.reset()}})};return(f,u)=>(m(),V(R,null,[t(F,{onClick:k},{default:e(()=>[o(r(a(s)("page.generate_samples")),1)]),_:1}),t(se,{show:_.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:h},{header:e(()=>[o(r(a(s)("page.generate_page_samples")),1)]),body:e(()=>[t(P,null,{title:e(()=>[p("label",Ce,[o(r(a(s)("page.brand_logo"))+" ",1),t(D,{danger:!0},{default:e(()=>[o("*")]),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.logo_url},null,8,["message"])]),default:e(()=>[p("div",null,[t(ye,{withPreload:!0,onUpload:u[0]||(u[0]=i=>{if(i.is_local_driver){a(l).logo_url=`/storage/${i.path}`;return}a(l).logo_url=i.url})},{default:e(()=>[t(N,null,{default:e(()=>[o(r(a(s)("general.upload")),1)]),_:1})]),_:1}),a(l).logo_url?(m(),V("img",{key:0,src:a(l).logo_url,class:"w-auto max-h-20 mt-xs",alt:"Logo"},null,8,Ie)):Q("",!0)])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",De,[o(r(a(s)("page.brand_name"))+" ",1),t(D,{danger:!0},{default:e(()=>[o("*")]),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.brand_name},null,8,["message"])]),default:e(()=>[t(I,{type:"text",modelValue:a(l).brand_name,"onUpdate:modelValue":u[1]||(u[1]=i=>a(l).brand_name=i),error:a(l).errors.brand_name,id:"brand_name"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Oe,[o(r(a(s)("page.contact_email"))+" ",1),t(D,{danger:!0},{default:e(()=>[o("*")]),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.email},null,8,["message"])]),default:e(()=>[t(I,{type:"text",modelValue:a(l).email,"onUpdate:modelValue":u[2]||(u[2]=i=>a(l).email=i),error:a(l).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Re,r(a(s)("page.register_url")),1)]),footer:e(()=>[t(w,{message:a(l).errors.register_url},null,8,["message"])]),default:e(()=>[t(I,{type:"text",modelValue:a(l).register_url,"onUpdate:modelValue":u[3]||(u[3]=i=>a(l).register_url=i),error:a(l).errors.register_url,id:"register_url"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{footer:e(()=>[t(w,{message:a(l).errors.destroy},null,8,["message"])]),default:e(()=>[p("label",null,[t(T,{checked:a(l).destroy,"onUpdate:checked":u[4]||(u[4]=i=>a(l).destroy=i),value:!1},null,8,["checked"]),p("span",Te,r(a(s)("page.destroy_existing_pages")),1)])]),_:1})]),footer:e(()=>[t(N,{onClick:h,class:"mr-xs"},{default:e(()=>[o(r(a(s)("general.cancel")),1)]),_:1}),t(F,{onClick:b,disabled:a(l).processing,isLoading:a(l).processing},{default:e(()=>[o(r(a(s)("page.generate")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},je={class:"w-full mx-auto row-py"},qe={class:"mt-lg row-px w-full"},Ae=le({layout:me}),ot=Object.assign(Ae,{__name:"Pages",props:{pages:{type:Object}},setup(n){const{t:s}=U(),d=S("routePrefix"),_=n,k=s("page.pages"),{notify:h}=j(),y=S("confirmation"),{selectedRecords:g,putPageRecords:l,toggleSelectRecordsOnPage:b,deselectRecord:f,deselectAllRecords:u}=_e(),i=()=>_.pages.data.map($=>$.uuid);oe(()=>{l(i()),O.on("pageDelete",$=>{f($)})}),re(()=>{O.off("pageDelete")}),ne(()=>_.pages.data,()=>{l(i())});const H=()=>{y().title(s("page.delete_pages")).description(s("page.confirm_delete_pages")).destructive().onConfirm($=>{$.isLoading(!0),J.delete(route(`${d}.pages.deleteMultiple`),{data:{pages:g.value},preserveScroll:!0,onSuccess(){u(),h("success",s("page.pages_deleted"))},onFinish(){$.reset()}})}).show()};return($,C)=>{const K=G("tooltip");return m(),V(R,null,[t(a(ie),{title:a(k)},null,8,["title"]),p("div",je,[t(fe,{title:a(k)},{description:e(()=>[o(r(a(s)("page.page_desc")),1)]),default:e(()=>[t(Ue)]),_:1},8,["title"]),p("div",qe,[t($e,{count:a(g).length,onClose:a(u)},{default:e(()=>[M((m(),v(pe,{onClick:H},{default:e(()=>[t(z)]),_:1})),[[K,a(s)("general.delete")]])]),_:1},8,["count","onClose"]),t(we,null,{default:e(()=>[t(a(ue),{href:$.route(`${a(d)}.pages.create`),class:"mb-xs sm:mb-0"},{default:e(()=>[t(de,null,{default:e(()=>[o(r(a(s)("page.create_page")),1)]),_:1})]),_:1},8,["href"])]),_:1}),t(ge,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(he,null,{head:e(()=>[t(Z,null,{default:e(()=>[t(c,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(T,{checked:a(b),"onUpdate:checked":C[0]||(C[0]=x=>B(b)?b.value=x:null),disabled:!n.pages.data.length},null,8,["checked","disabled"])]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.name")),1)]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("page.url_path")),1)]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.status")),1)]),_:1}),t(c,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.created_at")),1)]),_:1}),t(c,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(m(!0),V(R,null,ce(n.pages.data,x=>(m(),v(Ve,{key:x.uuid,item:x,onOnDelete:()=>{a(f)(x.uuid)}},{checkbox:e(()=>[t(T,{checked:a(g),"onUpdate:checked":C[1]||(C[1]=W=>B(g)?g.value=W:null),value:x.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),n.pages.data.length?Q("",!0):(m(),v(be,{key:0,class:"p-md"},{default:e(()=>[o(r(a(s)("page.no_pages_found")),1)]),_:1}))]),_:1})])])],64)}}});export{ot as default};
