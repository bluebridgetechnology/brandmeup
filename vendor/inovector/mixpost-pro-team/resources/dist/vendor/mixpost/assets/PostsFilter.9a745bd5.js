import{p as P,o as r,c as f,e as h,u as R,i as F,cN as H,I as T,N as D,ap as j,R as U,V as W,b as m,g as I,w as s,a as e,ak as z,a7 as L,ag as x,f as _,t as u,j as y,P as Q,ah as M,S as Y,Y as G,cz as J,al as g,cp as K,n as X,k as Z,F as A,r as B,an as ee}from"./app.3dbb9f4f.js";import{_ as se}from"./PureButtonLink.52cd3818.js";import{E as te}from"./EllipsisVertical.6eb78bb2.js";import{T as oe}from"./Trash.108c227d.js";import{b as ae,c as ne}from"./VerticallyScrollableContent.219a26b7.js";import{_ as re}from"./ProviderIcon.fe1a63e2.js";import{_ as N}from"./Checkbox.1a8805b0.js";import{_ as le}from"./SearchInput.2b4b1fa0.js";const ce={},ie={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},de=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"},null,-1),ue=[de];function pe(o,w){return r(),f("svg",ie,ue)}const me=P(ce,[["render",pe]]),_e={},fe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},he=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"},null,-1),we=[he];function ve(o,w){return r(),f("svg",fe,we)}const ke=P(_e,[["render",ve]]),ge={},$e={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-red-500"},be=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),xe=[be];function ye(o,w){return r(),f("svg",$e,xe)}const Ve=P(ge,[["render",ye]]),Ce={class:"flex flex-row items-center gap-xs"},Je={__name:"PostItemActions",props:{itemId:{type:String,required:!0},trashed:{type:Boolean,default:!1},type:{type:String,required:!1},status:{type:String,required:!1}},emits:["onDelete"],setup(o,{emit:w}){const{t}=R(),l=F("workspaceCtx"),{isWorkspaceAdminRole:$}=H(),d=o,V=w,v=T(!1),k=D(()=>{const i=j().props;return i.hasOwnProperty("filter")?i.filter.status:null}),{notify:c}=X(),p=()=>{g.delete(route("br.posts.delete",{workspace:l.id,post:d.itemId,status:k.value}),{onSuccess(){v.value=!1,c("success",k.value==="trash"?t("post.post_deleted_permanently"):t("post.post_moved_to_trash")),V("onDelete"),K.emit("postDelete",d.itemId)}})},b=()=>{g.post(route("br.posts.duplicate",{workspace:l.id,post:d.itemId}),{},{onSuccess(){c("success",t("post.post_duplicated"))}})},O=i=>{let a=!0;i=="post_now"?axios.post(route("br.posts.schedule",{workspace:l.id,post:d.itemId,isWorkspaceAdminRole:$.value}),{postNow:a}).then(n=>{c("success",n.data.message,{name:t("post.view_in_calendar"),href:route("br.calendar",{workspace:l.id,date:n.data.date})}),g.visit(route("br.posts.index",{workspace:l.id}))}).catch(n=>{console.log(n),S(n)}).finally(()=>{console.log("Done")}):axios.post(route("br.posts.addToQueue",{workspace:l.id,post:d.itemId,isWorkspaceAdminRole:$.value}),{}).then(n=>{c("success",n.data.message,{name:t("post.view_in_calendar"),href:route("br.calendar",{workspace:l.id,date:n.data.date})}),g.visit(route("br.posts.index",{workspace:l.id}))}).catch(n=>{console.log(n),S(n)}).finally(()=>{console.log("Done")})},q=()=>{axios.post(route("br.posts.declinePost",{workspace:l.id,post:d.itemId}),{}).then(i=>{c("success",i.data.message),g.visit(route("br.posts.index",{workspace:l.id}))}).catch(i=>{S(i)}).finally(()=>{console.log("Done")})},S=i=>{if(i.response.status!==422){c("error",i.response.data.message);return}const a=i.response.data.errors,n=a.hasOwnProperty("in_history")||a.hasOwnProperty("publishing");n||c("error",a),n&&g.visit(route("br.posts.edit",{workspace:l.id,post:postId.value}))},E=()=>{g.post(route("br.posts.restore",{workspace:l.id,post:d.itemId}),{},{onSuccess(){c("success",t("post.post_restored"))}})};return(i,a)=>{const n=U("tooltip");return r(),f("div",null,[h("div",Ce,[W((r(),I(se,{href:i.route("br.posts.edit",{workspace:m(l).id,post:o.itemId})},{default:s(()=>[e(z)]),_:1},8,["href"])),[[n,m(t)("general.edit")]]),e(M,{"width-classes":"w-32",placement:"bottom-end"},{trigger:s(()=>[e(L,{class:"mt-1"},{default:s(()=>[e(te)]),_:1})]),content:s(()=>[o.trashed?(r(),I(x,{key:0,onClick:E,as:"button"},{default:s(()=>[e(ke,{class:"!w-5 !h-5 mr-1"}),_(" "+u(m(t)("general.restore")),1)]),_:1})):y("",!0),e(x,{onClick:b,as:"button"},{default:s(()=>[e(me,{class:"!w-5 !h-5 mr-1"}),_(" "+u(m(t)("general.duplicate")),1)]),_:1}),d.status==="pending"&&m($)?(r(),I(x,{key:1,onClick:a[0]||(a[0]=C=>O(d.type)),as:"button"},{default:s(()=>[e(Q,{class:"!w-5 !h-5 mr-1",style:{color:"green"}}),_(" Approve ")]),_:1})):y("",!0),d.status==="pending"&&m($)?(r(),I(x,{key:2,onClick:a[1]||(a[1]=C=>q()),as:"button"},{default:s(()=>[e(Ve,{class:"!w-5 !h-5 mr-1",style:{color:"red"}}),_(" Decline ")]),_:1})):y("",!0),e(x,{onClick:a[2]||(a[2]=C=>v.value=!0),as:"button"},{default:s(()=>[e(oe,{class:"!w-5 !h-5 mr-1 text-red-500"}),_(" "+u(m(t)("general.delete")),1)]),_:1})]),_:1})]),e(J,{show:v.value,variant:"danger",onClose:a[4]||(a[4]=C=>v.value=!1)},{header:s(()=>[_(u(m(t)("post.delete_post")),1)]),body:s(()=>[_(u(m(t)("post.confirm_delete_post")),1)]),footer:s(()=>[e(Y,{onClick:a[3]||(a[3]=C=>v.value=!1),class:"mr-xs"},{default:s(()=>[_(u(m(t)("general.cancel")),1)]),_:1}),e(G,{onClick:p},{default:s(()=>[_(u(o.trashed?m(t)("general.delete_permanently"):m(t)("general.delete")),1)]),_:1})]),_:1},8,["show"])])}}},Ie={},De={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Pe=h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"},null,-1),Se=[Pe];function je(o,w){return r(),f("svg",De,Se)}const Ae=P(Ie,[["render",je]]),Be={class:"flex items-center"},Ne={class:"ml-xs hidden sm:inline-block"},Le={key:0,class:"px-2 py-1 rounded-md bg-white text-black font-bold"},Me={key:0,class:"p-sm"},Oe={class:"font-semibold"},qe={class:"mt-sm flex flex-wrap items-center gap-xs"},Ee={class:"p-sm mt-sm"},Re={class:"font-semibold"},Fe={class:"mt-sm flex flex-wrap items-center gap-xs"},Ke={__name:"PostsFilter",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(o,{emit:w}){const t=o,l=w,$=D(()=>j().props.accounts),d=D(()=>j().props.tags),V=D(()=>t.modelValue.tags.length+t.modelValue.accounts.length),v=()=>{l("update:modelValue",Object.assign(t.modelValue,{keyword:"",tags:[],accounts:[]}))};return(k,c)=>(r(),f("div",Be,[e(le,{modelValue:o.modelValue.keyword,"onUpdate:modelValue":c[0]||(c[0]=p=>o.modelValue.keyword=p),class:"mr-2"},null,8,["modelValue"]),e(M,{"width-classes":"w-72",placement:"bottom-end","closeable-on-content":!1},{trigger:s(()=>[e(Z,{size:"md"},{default:s(()=>[e(Ae),h("span",Ne,[_(u(k.$t("general.filters"))+" ",1),V.value?(r(),f("span",Le,u(V.value),1)):y("",!0)])]),_:1})]),header:s(()=>[e(L,{onClick:v},{default:s(()=>[_(u(k.$t("general.clear_filter")),1)]),_:1})]),content:s(()=>[e(ae,null,{default:s(()=>[d.value.length?(r(),f("div",Me,[h("div",Oe,u(k.$t("post.labels")),1),h("div",qe,[(r(!0),f(A,null,B(d.value,p=>(r(),f("label",{key:p.id,class:"flex items-center cursor-pointer"},[e(N,{checked:o.modelValue.tags,"onUpdate:checked":c[1]||(c[1]=b=>o.modelValue.tags=b),value:p.id,number:"",class:"mr-1"},null,8,["checked","value"]),e(ne,{item:p,removable:!1,editable:!1},null,8,["item"])]))),128))])])):y("",!0),h("div",Ee,[h("div",Re,u(k.$t("post.accounts")),1),h("div",Fe,[(r(!0),f(A,null,B($.value,p=>(r(),f("label",{key:p.id,class:"flex items-center cursor-pointer"},[e(N,{checked:o.modelValue.accounts,"onUpdate:checked":c[2]||(c[2]=b=>o.modelValue.accounts=b),value:p.id,number:"",class:"mr-1"},null,8,["checked","value"]),e(ee,null,{default:s(()=>[e(re,{provider:p.provider,class:"!w-4 !h-4 mr-xs"},null,8,["provider"]),_(" "+u(p.name),1)]),_:2},1024)]))),128))])])]),_:1})]),_:1})]))}};export{Je as _,Ke as a};
