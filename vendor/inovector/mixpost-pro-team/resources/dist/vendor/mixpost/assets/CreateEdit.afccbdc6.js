import{d as B,u as F,i as y,a6 as I,N as O,T as P,c as g,a as r,b as e,e as n,w as a,m as z,k as L,F as M,o as b,Z as A,h as D,S as Y,f as m,t as l,Y as Z,j as k,_ as f,$ as w,ab as x,al as G,n as H}from"./app.3dbb9f4f.js";import{u as J}from"./usePageMode.55077520.js";import{_ as K}from"./Admin.8227e551.js";import{_ as Q}from"./PageHeader.5278f6a5.js";import{_ as S}from"./Panel.1435ce07.js";import{_ as U}from"./Radio.02f44a14.js";import{E as R}from"./Eye.96ec91e4.js";import{T as W}from"./Trash.108c227d.js";import{_ as C}from"./InputHidden.428c3568.js";import"./QueueList.71914ee1.js";import"./Flex.781629fc.js";const X={class:"row-py w-full mx-auto"},ee={key:0,class:"flex"},se={class:"row-px"},re={for:"name"},ae={for:"email"},te={class:"flex items-center space-x-sm"},oe={key:0},le={for:"password"},ie={for:"password_confirmation"},ne=B({layout:K}),ve=Object.assign(ne,{__name:"CreateEdit",props:{mode:{type:String,default:"create"},user:{type:Object}},setup(_){const{t}=F(),h=y("routePrefix"),q=y("confirmation"),c=_,{notify:v}=H(),{user:V}=I(),$=O(()=>p.value?t("user.create_user"):"Edit user"),{isCreate:p,isEdit:u}=J(),s=P({name:u.value?c.user.name:"",email:u.value?c.user.email:"",is_admin:u.value?c.user.is_admin:!1,password:"",password_confirmation:""}),E=()=>{s.post(route("br.users.store"),{preserveScroll:!0,preserveState:!0})},N=()=>{s.put(route("br.users.update",{user:c.user.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const d=[t("user.user_has_been_updated"),t("auth.password_has_been_changed")];v("success",s.password?d.join(`
`):d[0])}})},j=()=>{p.value&&E(),u.value&&N()},T=()=>{q().title(t("user.delete_user")).description(t("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),G.delete(route(`${h}.users.delete`,{user:c.user.id}),{onSuccess(o){o.props.flash.error||v("success",t("user.delete_user"))},onFinish(){d.isLoading(!1)}})}).show()};return(d,o)=>(b(),g(M,null,[r(e(A),{title:$.value},null,8,["title"]),n("div",X,[r(Q,{title:$.value},{default:a(()=>[e(u)?(b(),g("div",ee,[r(e(D),{href:d.route(`${e(h)}.users.view`,{user:_.user.id}),class:"mr-xs"},{default:a(()=>[r(Y,{size:"sm"},{icon:a(()=>[r(R)]),default:a(()=>[m(" "+l(e(t)("general.view")),1)]),_:1})]),_:1},8,["href"]),r(Z,{onClick:T,size:"sm"},{icon:a(()=>[r(W)]),_:1})])):k("",!0)]),_:1},8,["title"]),n("div",se,[n("form",{method:"post",onSubmit:z(j,["prevent"])},[r(S,null,{title:a(()=>[m(l(e(t)("user.user_details")),1)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",re,l(e(t)("general.name")),1)]),footer:a(()=>[r(w,{message:e(s).errors.name},null,8,["message"])]),default:a(()=>[r(x,{modelValue:e(s).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(s).name=i),error:e(s).errors.name,type:"text",id:"name",class:"w-full",autofocus:"",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[n("label",ae,l(e(t)("general.email")),1)]),footer:a(()=>[r(w,{message:e(s).errors.email},null,8,["message"])]),default:a(()=>[r(x,{modelValue:e(s).email,"onUpdate:modelValue":o[1]||(o[1]=i=>e(s).email=i),error:e(s).errors.email,type:"email",id:"email",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("user.system_admin")),1)]),default:a(()=>[n("div",te,[n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[2]||(o[2]=i=>e(s).is_admin=i),value:!1,disabled:e(u)&&_.user.id===e(V).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.no")),1)]),n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[3]||(o[3]=i=>e(s).is_admin=i),value:!0,disabled:e(u)&&_.user.id===e(V).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.yes")),1)])])]),_:1})]),_:1}),r(S,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("auth.password")),1)]),description:a(()=>[e(u)?(b(),g("span",oe,l(e(t)("auth.leave_blank_password")),1)):k("",!0)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",le,l(e(t)("auth.password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password},null,8,["message"])]),default:a(()=>[r(C,{modelValue:e(s).password,"onUpdate:modelValue":o[4]||(o[4]=i=>e(s).password=i),error:e(s).errors.password,id:"password",required:e(p),autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[n("label",ie,l(e(t)("auth.confirm_password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password_confirmation},null,8,["message"])]),default:a(()=>[r(C,{modelValue:e(s).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=i=>e(s).password_confirmation=i),error:e(s).errors.password_confirmation,id:"password_confirmation",required:!!e(s).password,autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1})]),_:1}),r(L,{type:"submit",disabled:e(s).processing,class:"mt-lg"},{default:a(()=>[m(l(e(p)?e(t)("general.create"):e(t)("general.update")),1)]),_:1},8,["disabled"])],32)])])],64))}});export{ve as default};
