import{E as te}from"./VariableManager.15c574d0.js";import{_ as j}from"./Flex.781629fc.js";import{p as P,o as i,c as g,e as p,u as ae,I as y,N as E,cZ as oe,af as ne,a,co as D,b as v,ab as se,w as t,F as N,r as le,g as x,O as ie,t as r,f as b,j as C,m as A,a0 as re,R as G,V as q,S,k as K,A as de,H as U,X as me,a7 as ce,i as I,ct as Z,J as ue,ac as pe}from"./app.3dbb9f4f.js";import{_ as fe,L as ve}from"./ListItem.b96016ef.js";import{_ as _e}from"./NoResult.f7bfb2e6.js";import{u as H}from"./useAPIForm.db22c2d8.js";import{_ as $e}from"./Select.2234a951.js";import{_ as ge}from"./Textarea.2260d931.js";import{V as F}from"./VerticalGroup.1aa58a90.js";import{R as he}from"./Refresh.1865b3fa.js";import{_ as be}from"./ClipboardButton.376defca.js";import{u as ke}from"./Variable.cb6cad2c.js";import"./index.d961b7a1.js";import"./index.bd465a20.js";import"./vue.runtime.esm-bundler.d43166be.js";import"./usePostVersions.f18e2fc4.js";import"./MediaGifs.98eb8be9.js";import"./index.browser.8e74d592.js";import"./Masonry.1a75e465.js";import"./MediaFile.dd3a1c78.js";import"./ExclamationCircle.5d8a3fe5.js";import"./SectionTitle.453db892.js";import"./SearchInput.2b4b1fa0.js";import"./Alert.68363348.js";import"./Tab.87218907.js";import"./EllipsisVertical.6eb78bb2.js";import"./Trash.108c227d.js";import"./Clipboard.92827572.js";const ye={},xe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},we=p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"},null,-1),Ce=[we];function Le(s,o){return i(),g("svg",xe,Ce)}const V=P(ye,[["render",Le]]),Se={},ze={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Be=p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1),je=[Be];function Ve(s,o){return i(),g("svg",ze,je)}const J=P(Se,[["render",Ve]]),Me={},Ne={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},De=p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"},null,-1),Ie=[De];function Ee(s,o){return i(),g("svg",Ne,Ie)}const O=P(Me,[["render",Ee]]),Ae=["onKeydown"],Pe={class:"mt-xs"},Re={key:1,class:"mr-[8px]"},Te={__name:"Spotlight",emits:["selected-command"],setup(s,{emit:o}){const{t:e}=ae(),d=[{name:"rephrase",nameLocalized:e("ai.rephrase"),icon:"Sparkles"},{name:"fix_spelling_grammar",nameLocalized:e("ai.fix_spelling_grammar"),icon:"Sparkles"},{name:"expand",nameLocalized:e("ai.expand"),icon:"PlusSimple"},{name:"shorten",nameLocalized:e("ai.shorten"),icon:"Minus"},{name:"simplify",nameLocalized:e("ai.simplify"),icon:"Sparkles"},{name:"friendly_tone",nameLocalized:e("ai.friendly_tone"),icon:"",emoji:"\u{1F60A}"},{name:"formal_tone",nameLocalized:e("ai.formal_tone"),icon:"",emoji:"\u{1F3A9}"},{name:"edgy_tone",nameLocalized:e("ai.edgy_tone"),icon:"",emoji:"\u{1F918}"},{name:"engaging_tone",nameLocalized:e("ai.engaging_tone"),icon:"",emoji:"\u{1F91D}"},{name:"generate",nameLocalized:e("general.generate_new"),icon:"Sparkles"}],h=o,n=y(""),k=y("improve"),f=y(0),_={Sparkles:V,PlusSimple:J,Minus:O},u=E(()=>d.filter(m=>oe(m.name).toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),L=m=>{k.value=m.name,h("selected-command",k.value)},$=m=>{m.key==="ArrowDown"||m.key==="Tab"?f.value<u.value.length-1?f.value++:f.value=0:m.key==="ArrowUp"&&(f.value>0?f.value--:f.value=u.value.length-1),k.value=u.value[f.value].name};return ne(n,()=>{u.value.length>0&&(k.value=u.value[0].name)}),(m,c)=>(i(),g("div",{onKeydown:[D(A($,["prevent"]),["up"]),D(A($,["prevent"]),["down"]),D(A($,["prevent"]),["tab"])]},[p("div",Pe,[a(se,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=w=>n.value=w),onKeydown:c[1]||(c[1]=D(w=>m.$emit("selected-command",k.value),["enter"])),type:"text",autofocus:"",placeholder:v(e)("general.search_jump"),class:"w-full"},null,8,["modelValue","placeholder"])]),a(ve,{class:"mt-xs"},{default:t(()=>[(i(!0),g(N,null,le(u.value,w=>(i(),x(fe,{onClick:M=>L(w),active:k.value===w.name,tabindex:"0",role:"button"},{default:t(()=>[a(j,null,{default:t(()=>[w.icon?(i(),x(ie(_[w.icon]),{key:0,class:"text-stone-800"})):(i(),g("div",Re,r(w.emoji),1)),b(" "+r(w.nameLocalized),1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),256)),u.value.length?C("",!0):(i(),x(_e,{key:0,class:"p-md"}))]),_:1})],40,Ae))}},Fe={class:"relative h-10 mt-lg"},X={__name:"Preloader",setup(s){return(o,e)=>(i(),g("div",Fe,[a(re,null,{default:t(()=>[b(r(o.$t("ai.is_writing")),1)]),_:1})]))}},Ge={class:"p-md rounded-md border border-primary-500"},Q={__name:"GeneratedContent",props:{text:{type:String,required:!0},buttonsDisabled:{type:Boolean,default:!1},insertButtonName:{type:String,default:""}},emits:["clickInsert","clickRetry"],setup(s){const o=y("");return(e,d)=>{const h=G("tooltip");return i(),g("div",Ge,[p("p",{ref_key:"dom",ref:o},r(s.text),513),a(j,{class:"mt-md justify-between items-center"},{default:t(()=>[q(a(be,{htmlElm:o.value,"show-text":!1,size:"xs",disabled:s.buttonsDisabled,component:"PureButton"},null,8,["htmlElm","disabled"]),[[h,e.$t("system.copy")]]),a(j,null,{default:t(()=>[a(S,{onClick:d[0]||(d[0]=n=>e.$emit("clickRetry")),size:"xs",disabled:s.buttonsDisabled},{icon:t(()=>[a(he)]),default:t(()=>[b(" "+r(e.$t("general.retry")),1)]),_:1},8,["disabled"]),a(K,{onClick:d[1]||(d[1]=n=>e.$emit("clickInsert")),size:"sm",disabled:s.buttonsDisabled},{default:t(()=>[b(r(s.insertButtonName?s.insertButtonName:e.$t("general.insert")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},qe={role:"button",class:"flex justify-between p-sm border border-stone-600 hover:border-stone-700 transition ease-in-out duration-200 w-full rounded-md"},W={__name:"DraftContent",props:{clearable:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["clickClear"],setup(s){return(o,e)=>(i(),g("div",qe,[p("div",{class:U({"overflow-hidden text-ellipsis truncate":!s.expanded})},[de(o.$slots,"default")],2),s.clearable?(i(),x(ce,{key:0,onClick:e[0]||(e[0]=d=>o.$emit("clickClear"))},{default:t(()=>[a(me)]),_:1})):C("",!0)]))}},Ke=p("div",{class:"text-lg"},"\u{1F60A}",-1),Ue=p("div",{class:"text-lg"},"\u{1F3A9}",-1),Ze=p("div",{class:"text-lg"},"\u{1F918}",-1),He=p("div",{class:"text-lg"},"\u{1F91D}",-1),Y={__name:"Commands",props:{disabled:{type:Boolean,default:!1}},emits:["selected-command"],setup(s){return(o,e)=>(i(),x(j,{wrap:!0,class:"justify-end"},{default:t(()=>[a(S,{onClick:e[0]||(e[0]=d=>o.$emit("selected-command","rephrase")),disabled:s.disabled,size:"xs"},{icon:t(()=>[a(V)]),default:t(()=>[b(" "+r(o.$t("ai.rephrase")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[1]||(e[1]=d=>o.$emit("selected-command","expand")),disabled:s.disabled,size:"xs"},{icon:t(()=>[a(J)]),default:t(()=>[b(" "+r(o.$t("ai.expand")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[2]||(e[2]=d=>o.$emit("selected-command","shorten")),disabled:s.disabled,size:"xs"},{icon:t(()=>[a(O)]),default:t(()=>[b(" "+r(o.$t("ai.shorten")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[3]||(e[3]=d=>o.$emit("selected-command","simplify")),disabled:s.disabled,size:"xs"},{icon:t(()=>[a(V)]),default:t(()=>[b(" "+r(o.$t("ai.simplify")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[4]||(e[4]=d=>o.$emit("selected-command","friendly_tone")),disabled:s.disabled,size:"xs"},{icon:t(()=>[Ke]),default:t(()=>[b(" "+r(o.$t("ai.more_friendly")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[5]||(e[5]=d=>o.$emit("selected-command","formal_tone")),disabled:s.disabled,size:"xs"},{icon:t(()=>[Ue]),default:t(()=>[b(" "+r(o.$t("ai.more_formal")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[6]||(e[6]=d=>o.$emit("selected-command","edgy_tone")),disabled:s.disabled,size:"xs"},{icon:t(()=>[Ze]),default:t(()=>[b(" "+r(o.$t("ai.more_edgy")),1)]),_:1},8,["disabled"]),a(S,{onClick:e[7]||(e[7]=d=>o.$emit("selected-command","engaging_tone")),disabled:s.disabled,size:"xs"},{icon:t(()=>[He]),default:t(()=>[b(" "+r(o.$t("ai.more_engaging")),1)]),_:1},8,["disabled"])]),_:1}))}},Je={for:"prompt"},Oe={for:"tone"},Xe={value:"neutral"},Qe={value:"friendly"},We={value:"formal"},Ye={value:"edgy"},et={value:"engaging"},tt={key:0},at={key:1},ot={__name:"TextGenerator",props:{characterLimit:{type:Number,default:1e3}},emits:["insert"],setup(s,{emit:o}){const e=I("routePrefix"),d=I("workspaceCtx"),h=s,n=H({prompt:"",tone:"neutral",character_limit:h.characterLimit>1e3?1e3:h.characterLimit,text:"",command:""}),k=y("form"),f=y(!1),_=y(!1),u=y(""),L=E(()=>k.value==="form"),$=l=>{k.value=l},m=()=>{$("form"),_.value=!0},c=()=>{$("result"),_.value=!1},w=()=>{n.reset(),m(),f.value=!1,_.value=!1,u.value=""},{onCatch:M}=Z(),R=()=>{c(),n.transform(l=>({prompt:l.prompt,tone:l.tone,character_limit:l.character_limit})).post(route(`${e}.ai.text.generate`,{workspace:d.id}),{onSuccess(l){u.value=l.text,f.value=!0},onError(l){M(l)}})},T=()=>{c(),n.transform(l=>({text:l.text,command:l.command,character_limit:l.character_limit>1e3?1e3:l.character_limit})).post(route(`${e}.ai.text.modify`,{workspace:d.id}),{onSuccess(l){u.value=l.text},onError(l){M(l)}})},ee=()=>{if(!n.command){R();return}T()};return(l,z)=>(i(),g(N,null,[L.value?(i(),g(N,{key:0},[a(F,null,{title:t(()=>[p("label",Je,r(l.$t("ai.tell_ai")),1)]),default:t(()=>[a(ge,{modelValue:v(n).prompt,"onUpdate:modelValue":z[0]||(z[0]=B=>v(n).prompt=B),id:"prompt",rows:"4",autofocus:"",placeholder:l.$t("ai.write_about")},null,8,["modelValue","placeholder"])]),_:1}),a(F,{class:"mt-lg"},{title:t(()=>[p("label",Oe,r(l.$t("ai.tone_")),1)]),default:t(()=>[a($e,{modelValue:v(n).tone,"onUpdate:modelValue":z[1]||(z[1]=B=>v(n).tone=B),id:"tone"},{default:t(()=>[p("option",Xe,r(l.$t("ai.tone.neutral")),1),p("option",Qe,"\u{1F60A} "+r(l.$t("ai.tone.friendly")),1),p("option",We,"\u{1F3A9} "+r(l.$t("ai.tone.formal")),1),p("option",Ye,"\u{1F918} "+r(l.$t("ai.tone.edgy")),1),p("option",et,"\u{1F91D} "+r(l.$t("ai.tone.engaging")),1)]),_:1},8,["modelValue"])]),_:1}),a(j,{class:"mt-lg justify-end"},{default:t(()=>[f.value?(i(),x(S,{key:0,onClick:c},{default:t(()=>[b(r(l.$t("general.cancel")),1)]),_:1})):C("",!0),a(K,{onClick:R,size:"md",isLoading:v(n).processing,disabled:v(n).processing||!v(n).prompt},{icon:t(()=>[a(V)]),default:t(()=>[_.value?(i(),g("span",at,r(l.$t("general.generate_new")),1)):(i(),g("span",tt,r(l.$t("general.generate")),1))]),_:1},8,["isLoading","disabled"])]),_:1})],64)):C("",!0),L.value?C("",!0):(i(),x(W,{key:1,onClick:m,onClickClear:w,clearable:!v(n).processing,class:"mt-xs"},{default:t(()=>[b(r(v(n).prompt),1)]),_:1},8,["clearable"])),v(n).processing?(i(),x(X,{key:2})):C("",!0),f.value&&!v(n).processing?(i(),g(N,{key:3},[a(Q,{onClickInsert:z[2]||(z[2]=B=>l.$emit("insert",u.value)),onClickRetry:ee,text:u.value,buttonsDisabled:_.value,insertButtonName:"Insert",class:U(["mt-lg",{"opacity-50":_.value}])},null,8,["text","buttonsDisabled","class"]),a(Y,{onSelectedCommand:z[3]||(z[3]=B=>{v(n).command=B,v(n).text=u.value,T()}),disabled:_.value,class:"mt-lg"},null,8,["disabled"])],64)):C("",!0)],64))}},nt={class:"font-medium"},st={key:1,class:"mt-lg"},lt={class:"font-medium"},it={__name:"TextModifier",props:{text:{type:String,required:!0},command:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["replace"],setup(s){const o=I("routePrefix"),e=I("workspaceCtx"),d=s,h=H({text:d.text,command:d.command,character_limit:d.characterLimit>1e3?1e3:d.characterLimit}),{getTextFromHtmlString:n}=ke(),k=E(()=>n(d.text)),f=y(!1),_=y(""),{onCatch:u}=Z();ue(()=>{L()});const L=()=>{h.post(route(`${o}.ai.text.modify`,{workspace:e.id}),{onSuccess($){_.value=$.text},onError($){u($)}})};return($,m)=>(i(),g(N,null,[p("div",null,[p("div",nt,r($.$t("ai.draft_content")),1),a(W,{onClick:m[0]||(m[0]=c=>f.value=!f.value),expanded:f.value,class:"mt-xs"},{default:t(()=>[b(r(k.value),1)]),_:1},8,["expanded"])]),v(h).processing?(i(),x(X,{key:0})):C("",!0),_.value&&!v(h).processing?(i(),g("div",st,[p("div",lt,r($.$t("ai.generated_content")),1),a(Q,{onClickInsert:m[1]||(m[1]=c=>$.$emit("replace",_.value)),onClickRetry:L,text:_.value,insertButtonName:$.$t("general.replace"),class:"mt-xs"},null,8,["text","insertButtonName"]),a(Y,{onSelectedCommand:m[2]||(m[2]=c=>{v(h).command=c,v(h).text=_.value,L()}),class:"mt-lg"})])):C("",!0)],64))}},Et={__name:"AIAssist",props:{text:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["insert","replace","close"],setup(s,{emit:o}){const e=o,d=s,h=y(!1),n=y("spotlight"),k=y(""),f=E(()=>d.text===""||d.text==="<div></div>"),_=()=>{f.value&&(n.value="generator"),h.value=!0},u=()=>{h.value=!1,n.value="spotlight"},L=c=>{if(c!=="generate"){n.value="modifier",k.value=c;return}n.value="generator"},$=c=>{e("insert",c),u()},m=c=>{e("replace",c),u()};return(c,w)=>{const M=G("tooltip");return i(),g("div",null,[q((i(),x(te,{onClick:_},{default:t(()=>[a(V)]),_:1})),[[M,"AI Assist"]]),a(pe,{show:h.value,onClose:u,"max-width":"md",closeable:!0,"scrollable-body":!0},{header:t(()=>[a(j,{class:"items-center"},{default:t(()=>[a(V,{class:"text-stone-800"}),b(" "+r(c.$t("ai.ai_assist")),1)]),_:1})]),body:t(()=>[n.value==="spotlight"?(i(),x(Te,{key:0,onSelectedCommand:L})):C("",!0),n.value==="generator"?(i(),x(ot,{key:1,onInsert:$,characterLimit:s.characterLimit},null,8,["characterLimit"])):C("",!0),n.value==="modifier"?(i(),x(it,{key:2,onReplace:m,text:s.text,characterLimit:s.characterLimit,command:k.value},null,8,["text","characterLimit","command"])):C("",!0)]),_:1},8,["show"])])}}};export{Et as default};
