import{p as z,o as g,c as k,e as u,N as F,R as be,g as V,w as d,b as i,V as q,a,H,a7 as ae,a8 as We,I as B,a9 as Je,J as Xe,aa as Ye,F as j,r as Qe,j as Z,f as y,t as _,ab as te,S as G,k as ne,ac as ce,ad as et,ae as tt,af as Ie,ag as D,ah as Ve,ai as st,$ as U,O as nt,u as ye,i as J,aj as Be,T as ke,l as oe,ak as ot,Y as Ee,al as Oe,n as we,am as rt,an as it,ao as lt,a5 as at,d as dt,m as ut,Z as ct}from"./app.3dbb9f4f.js";import{_ as pt}from"./Admin.8227e551.js";import{u as mt}from"./usePageMode.55077520.js";import{_ as ht}from"./PageHeader.5278f6a5.js";import{_ as me}from"./Panel.1435ce07.js";import{T as $e}from"./Trash.108c227d.js";import{A as ft}from"./ArrowTopRightOnSquare.9c303ffa.js";import{V as O}from"./VerticalGroup.1aa58a90.js";import{_ as de}from"./Select.2234a951.js";import{_ as fe}from"./LabelSuffix.6a36f138.js";import{_ as Re}from"./Textarea.2260d931.js";import{H as gt,D as _t}from"./index.bd465a20.js";import{n as Pe}from"./index.browser.8e74d592.js";import{_ as vt,L as bt}from"./ListItem.b96016ef.js";import{_ as Ne}from"./NoResult.f7bfb2e6.js";import{N as E,m as L,w as se,M as K,a as X,b as Y,g as De,t as ge,P as xe,c as yt,T as W,d as kt,E as pe,S as ue,k as wt,e as Ae,F as _e,f as Ce,D as $t,h as xt,i as At,j as Ct,n as Fe,l as Mt,o as Lt,p as Tt,q as Ht,r as ve,s as St,V as zt,u as It,v as Vt,L as Bt,x as Et}from"./index.d961b7a1.js";import{_ as Ot}from"./UploadButton.7cbd1b3f.js";import"./QueueList.71914ee1.js";import"./Flex.781629fc.js";import"./vue.runtime.esm-bundler.d43166be.js";const Rt={},Pt={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 7 18"},Nt=u("path",{d:"M2.10477 13.5C1.48483 13.5 0.982269 12.9963 0.982269 12.375C0.982269 11.7537 1.48483 11.25 2.10477 11.25C2.72472 11.25 3.22728 11.7537 3.22728 12.375C3.22728 12.9963 2.72472 13.5 2.10477 13.5ZM2.10477 6C1.48483 6 0.982269 5.49632 0.982269 4.875C0.982269 4.25368 1.48483 3.75 2.10477 3.75C2.72472 3.75 3.22728 4.25368 3.22728 4.875C3.22728 5.49632 2.72472 6 2.10477 6ZM2.10477 2.25C1.48483 2.25 0.982269 1.74632 0.982269 1.125C0.982269 0.50368 1.48483 0 2.10477 0C2.72472 0 3.22728 0.50368 3.22728 1.125C3.22728 1.74632 2.72472 2.25 2.10477 2.25ZM2.10477 17.25C1.48483 17.25 0.982269 16.7463 0.982269 16.125C0.982269 15.5037 1.48483 15 2.10477 15C2.72472 15 3.22728 15.5037 3.22728 16.125C3.22728 16.7463 2.72472 17.25 2.10477 17.25ZM2.10477 9.75C1.48483 9.75 0.982269 9.24632 0.982269 8.625C0.982269 8.00368 1.48483 7.5 2.10477 7.5C2.72472 7.5 3.22728 8.00368 3.22728 8.625C3.22728 9.24632 2.72472 9.75 2.10477 9.75ZM5.84646 13.5C5.22652 13.5 4.72395 12.9963 4.72395 12.375C4.72395 11.7537 5.22652 11.25 5.84646 11.25C6.4664 11.25 6.96897 11.7537 6.96897 12.375C6.96897 12.9963 6.4664 13.5 5.84646 13.5ZM5.84646 6C5.22652 6 4.72395 5.49632 4.72395 4.875C4.72395 4.25368 5.22652 3.75 5.84646 3.75C6.4664 3.75 6.96897 4.25368 6.96897 4.875C6.96897 5.49632 6.4664 6 5.84646 6ZM5.84646 2.25C5.22652 2.25 4.72395 1.74632 4.72395 1.125C4.72395 0.50368 5.22652 0 5.84646 0C6.4664 0 6.96897 0.50368 6.96897 1.125C6.96897 1.74632 6.4664 2.25 5.84646 2.25ZM5.84646 17.25C5.22652 17.25 4.72395 16.7463 4.72395 16.125C4.72395 15.5037 5.22652 15 5.84646 15C6.4664 15 6.96897 15.5037 6.96897 16.125C6.96897 16.7463 6.4664 17.25 5.84646 17.25ZM5.84646 9.75C5.22652 9.75 4.72395 9.24632 4.72395 8.625C4.72395 8.00368 5.22652 7.5 5.84646 7.5C6.4664 7.5 6.96897 8.00368 6.96897 8.625C6.96897 9.24632 6.4664 9.75 5.84646 9.75Z",fill:"currentColor"},null,-1),Dt=[Nt];function Ft(e,t){return g(),k("svg",Pt,Dt)}const qt=z(Rt,[["render",Ft]]),Ut=/^\s*>\s$/,jt=E.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[se({find:Ut,type:this.type})]}}),Zt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Gt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Kt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Wt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Jt=K.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[X({find:Zt,type:this.type}),X({find:Kt,type:this.type})]},addPasteRules(){return[Y({find:Gt,type:this.type}),Y({find:Wt,type:this.type})]}}),Xt=E.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Le=K.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",L(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const s=De(e,this.type);return Object.entries(s).some(([,n])=>!!n)?!0:t.unsetMark(this.name)}}}}),Te=/^\s*([-+*])\s$/,Yt=E.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",L(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Xt.name,this.editor.getAttributes(Le.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=se({find:Te,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=se({find:Te,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Le.name),editor:this.editor})),[e]}}),Qt=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,es=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,ts=K.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[X({find:Qt,type:this.type})]},addPasteRules(){return[Y({find:es,type:this.type})]}}),ss=/^```([a-z]+)?[\s\n]$/,ns=/^~~~([a-z]+)?[\s\n]$/,os=E.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:s}=this.options,o=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(p=>p.startsWith(s)).map(p=>p.replace(s,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",L(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,s=t.pos===1;return!e||t.parent.type.name!==this.name?!1:s||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:s}=t,{$from:r,empty:n}=s;if(!n||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,p=r.parent.textContent.endsWith(`

`);return!o||!p?!1:e.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:s,doc:r}=t,{$from:n,empty:o}=s;if(!o||n.parent.type!==this.type||!(n.parentOffset===n.parent.nodeSize-2))return!1;const c=n.after();return c===void 0||r.nodeAt(c)?!1:e.commands.exitCode()}}},addInputRules(){return[ge({find:ss,type:this.type,getAttributes:e=>({language:e[1]})}),ge({find:ns,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new xe({key:new yt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const s=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),n=r?JSON.parse(r):void 0,o=n==null?void 0:n.mode;if(!s||!o)return!1;const{tr:p}=e.state;return e.state.selection.from===e.state.doc.nodeSize-(1+e.state.selection.$to.depth*2)?p.insert(e.state.selection.from-1,this.type.create({language:o})):p.replaceSelectionWith(this.type.create({language:o})),p.setSelection(W.near(p.doc.resolve(Math.max(0,p.selection.from-2)))),p.insertText(s.replace(/\r\n?/g,`
`)),p.setMeta("paste",!0),e.dispatch(p),!0}}})]}});function rs(e={}){return new xe({view(t){return new is(t,e)}})}class is{constructor(t,s){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=s.width)!==null&&r!==void 0?r:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(n=>{let o=p=>{this[n](p)};return t.dom.addEventListener(n,o),{name:n,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:s})=>this.editorView.dom.removeEventListener(t,s))}update(t,s){this.cursorPos!=null&&s.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),s=!t.parent.inlineContent,r;if(s){let c=t.nodeBefore,f=t.nodeAfter;if(c||f){let l=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(l){let h=l.getBoundingClientRect(),m=c?h.bottom:h.top;c&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:h.left,right:h.right,top:m-this.width/2,bottom:m+this.width/2}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos);r={left:c.left-this.width/2,right:c.left+this.width/2,top:c.top,bottom:c.bottom}}let n=this.editorView.dom.offsetParent;this.element||(this.element=n.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let o,p;if(!n||n==document.body&&getComputedStyle(n).position=="static")o=-pageXOffset,p=-pageYOffset;else{let c=n.getBoundingClientRect();o=c.left-n.scrollLeft,p=c.top-n.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-p+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),n=r&&r.type.spec.disableDropCursor,o=typeof n=="function"?n(this.editorView,s,t):n;if(s&&!o){let p=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=kt(this.editorView.state.doc,p,this.editorView.dragging.slice);c!=null&&(p=c)}this.setCursor(p),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const ls=pe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[rs(this.options)]}});class C extends ue{constructor(t){super(t,t)}map(t,s){let r=t.resolve(s.map(this.head));return C.valid(r)?new C(r):ue.near(r)}content(){return Ce.empty}eq(t){return t instanceof C&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new C(t.resolve(s.pos))}getBookmark(){return new Me(this.anchor)}static valid(t){let s=t.parent;if(s.isTextblock||!as(t)||!ds(t))return!1;let r=s.type.spec.allowGapCursor;if(r!=null)return r;let n=s.contentMatchAt(t.index()).defaultType;return n&&n.isTextblock}static findGapCursorFrom(t,s,r=!1){e:for(;;){if(!r&&C.valid(t))return t;let n=t.pos,o=null;for(let p=t.depth;;p--){let c=t.node(p);if(s>0?t.indexAfter(p)<c.childCount:t.index(p)>0){o=c.child(s>0?t.indexAfter(p):t.index(p)-1);break}else if(p==0)return null;n+=s;let f=t.doc.resolve(n);if(C.valid(f))return f}for(;;){let p=s>0?o.firstChild:o.lastChild;if(!p){if(o.isAtom&&!o.isText&&!Ae.isSelectable(o)){t=t.doc.resolve(n+o.nodeSize*s),r=!1;continue e}break}o=p,n+=s;let c=t.doc.resolve(n);if(C.valid(c))return c}return null}}}C.prototype.visible=!1;C.findFrom=C.findGapCursorFrom;ue.jsonID("gapcursor",C);class Me{constructor(t){this.pos=t}map(t){return new Me(t.map(this.pos))}resolve(t){let s=t.resolve(this.pos);return C.valid(s)?new C(s):ue.near(s)}}function as(e){for(let t=e.depth;t>=0;t--){let s=e.index(t),r=e.node(t);if(s==0){if(r.type.spec.isolating)return!0;continue}for(let n=r.child(s-1);;n=n.lastChild){if(n.childCount==0&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}function ds(e){for(let t=e.depth;t>=0;t--){let s=e.indexAfter(t),r=e.node(t);if(s==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let n=r.child(s);;n=n.firstChild){if(n.childCount==0&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}function us(){return new xe({props:{decorations:hs,createSelectionBetween(e,t,s){return t.pos==s.pos&&C.valid(s)?new C(s):null},handleClick:ps,handleKeyDown:cs,handleDOMEvents:{beforeinput:ms}}})}const cs=wt({ArrowLeft:ie("horiz",-1),ArrowRight:ie("horiz",1),ArrowUp:ie("vert",-1),ArrowDown:ie("vert",1)});function ie(e,t){const s=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,n,o){let p=r.selection,c=t>0?p.$to:p.$from,f=p.empty;if(p instanceof W){if(!o.endOfTextblock(s)||c.depth==0)return!1;f=!1,c=r.doc.resolve(t>0?c.after():c.before())}let l=C.findGapCursorFrom(c,t,f);return l?(n&&n(r.tr.setSelection(new C(l))),!0):!1}}function ps(e,t,s){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!C.valid(r))return!1;let n=e.posAtCoords({left:s.clientX,top:s.clientY});return n&&n.inside>-1&&Ae.isSelectable(e.state.doc.nodeAt(n.inside))?!1:(e.dispatch(e.state.tr.setSelection(new C(r))),!0)}function ms(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof C))return!1;let{$from:s}=e.state.selection,r=s.parent.contentMatchAt(s.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let n=_e.empty;for(let p=r.length-1;p>=0;p--)n=_e.from(r[p].createAndFill(null,n));let o=e.state.tr.replace(s.pos,s.pos,new Ce(n,0,0));return o.setSelection(W.near(o.doc.resolve(s.pos+1))),e.dispatch(o),!1}function hs(e){if(!(e.selection instanceof C))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",$t.create(e.doc,[xt.widget(e.selection.head,t,{key:"gapcursor"})])}const fs=pe.create({name:"gapCursor",addProseMirrorPlugins(){return[us()]},extendNodeSchema(e){var t;const s={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=At(Ct(e,"allowGapCursor",s)))!==null&&t!==void 0?t:null}}}),gs=E.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",L(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:s,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:n,storedMarks:o}=s;if(n.$from.parent.type.spec.isolating)return!1;const{keepMarks:p}=this.options,{splittableMarks:c}=r.extensionManager,f=o||n.$to.parentOffset&&n.$from.marks();return t().insertContent({type:this.name}).command(({tr:l,dispatch:h})=>{if(h&&f&&p){const m=f.filter(x=>c.includes(x.type.name));l.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_s=E.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,L(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>ge({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),vs=E.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",L(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{$to:s}=t.selection,r=e();return s.parentOffset===0?r.insertContentAt(Math.max(s.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:n,dispatch:o})=>{var p;if(o){const{$to:c}=n.selection,f=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?n.setSelection(W.create(n.doc,c.pos+1)):c.nodeAfter.isBlock?n.setSelection(Ae.create(n.doc,c.pos)):n.setSelection(W.create(n.doc,c.pos));else{const l=(p=c.parent.type.contentMatch.defaultType)===null||p===void 0?void 0:p.create();l&&(n.insert(f,l),n.setSelection(W.create(n.doc,f+1)))}n.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Fe({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),bs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ys=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ks=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ws=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$s=K.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[X({find:bs,type:this.type}),X({find:ks,type:this.type})]},addPasteRules(){return[Y({find:ys,type:this.type}),Y({find:ws,type:this.type})]}}),xs=E.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),As=E.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),He=K.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",L(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const s=De(e,this.type);return Object.entries(s).some(([,n])=>!!n)?!0:t.unsetMark(this.name)}}}}),Se=/^(\d+)\.\s$/,Cs=E.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...s}=e;return t===1?["ol",L(this.options.HTMLAttributes,s),0]:["ol",L(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(As.name,this.editor.getAttributes(He.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=se({find:Se,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=se({find:Se,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(He.name)}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1],editor:this.editor})),[e]}}),Ms=E.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ls=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ts=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Hs=K.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){const e={};return Mt()?e["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():e["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),e},addInputRules(){return[X({find:Ls,type:this.type})]},addPasteRules(){return[Y({find:Ts,type:this.type})]}}),Ss=pe.create({name:"starterKit",addExtensions(){var e,t,s,r,n,o,p,c,f,l,h,m,x,A,I,T,$,b;const v=[];return this.options.blockquote!==!1&&v.push(jt.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bold!==!1&&v.push(Jt.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&v.push(Yt.configure((s=this.options)===null||s===void 0?void 0:s.bulletList)),this.options.code!==!1&&v.push(ts.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(os.configure((n=this.options)===null||n===void 0?void 0:n.codeBlock)),this.options.document!==!1&&v.push(Lt.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&v.push(ls.configure((p=this.options)===null||p===void 0?void 0:p.dropcursor)),this.options.gapcursor!==!1&&v.push(fs.configure((c=this.options)===null||c===void 0?void 0:c.gapcursor)),this.options.hardBreak!==!1&&v.push(gs.configure((f=this.options)===null||f===void 0?void 0:f.hardBreak)),this.options.heading!==!1&&v.push(_s.configure((l=this.options)===null||l===void 0?void 0:l.heading)),this.options.history!==!1&&v.push(gt.configure((h=this.options)===null||h===void 0?void 0:h.history)),this.options.horizontalRule!==!1&&v.push(vs.configure((m=this.options)===null||m===void 0?void 0:m.horizontalRule)),this.options.italic!==!1&&v.push($s.configure((x=this.options)===null||x===void 0?void 0:x.italic)),this.options.listItem!==!1&&v.push(xs.configure((A=this.options)===null||A===void 0?void 0:A.listItem)),this.options.orderedList!==!1&&v.push(Cs.configure((I=this.options)===null||I===void 0?void 0:I.orderedList)),this.options.paragraph!==!1&&v.push(Ms.configure((T=this.options)===null||T===void 0?void 0:T.paragraph)),this.options.strike!==!1&&v.push(Hs.configure(($=this.options)===null||$===void 0?void 0:$.strike)),this.options.text!==!1&&v.push(Tt.configure((b=this.options)===null||b===void 0?void 0:b.text)),v}}),zs=K.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Is=pe.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.every(s=>t.updateAttributes(s,{textAlign:e})):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Vs=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Bs=E.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",L(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Fe({find:Vs,type:this.type,getAttributes:e=>{const[,,t,s,r]=e;return{src:s,alt:t,title:r}}})]}}),S={INLINE:"inline",CENTER:"center",FLOAT_LEFT:"left",FLOAT_RIGHT:"right"},he={};function Es(e){return new Promise((t,s)=>{const r={complete:!1,width:0,height:0,src:e};if(!e){s(r);return}if(he[e]){t({...he[e]});return}const n=new Image;n.onload=()=>{r.width=n.width,r.height=n.height,r.complete=!0,he[e]={...r},t(r)},n.onerror=()=>{s(r)},n.src=e})}function Os(e,t,s){return e<t?t:e>s?s:e}const Rs=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,Ps=null,Ns=S.INLINE,Ds={},Fs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},qs=u("path",{d:"M4 19h16v2H4zm5-4h11v2H9zm-5-4h16v2H4zm0-8h16v2H4zm5 4h11v2H9z"},null,-1),Us=[qs];function js(e,t){return g(),k("svg",Fs,Us)}const qe=z(Ds,[["render",js]]),Zs={},Gs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},Ks=u("path",{d:"M4 19h16v2H4zm3-4h10v2H7zm-3-4h16v2H4zm0-8h16v2H4zm3 4h10v2H7z"},null,-1),Ws=[Ks];function Js(e,t){return g(),k("svg",Gs,Ws)}const Ue=z(Zs,[["render",Js]]),Xs={},Ys={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},Qs=u("path",{d:"M4 19h16v2H4zm0-4h11v2H4zm0-4h16v2H4zm0-8h16v2H4zm0 4h11v2H4z"},null,-1),en=[Qs];function tn(e,t){return g(),k("svg",Ys,en)}const je=z(Xs,[["render",tn]]),sn={class:"p-md bg-white"},nn={class:"editorClassicMenu flex gap-xs"},on={__name:"ImageMenu",props:{editor:{required:!0,type:Ht},node:ve.node,updateAttributes:ve.updateAttributes,deleteNode:{required:!0,type:Function},selected:{required:!0,type:Boolean}},setup(e){const t=e,s=F(()=>t.node.attrs.display),r=o=>{if(o===s.value){t.updateAttributes({display:S.INLINE});return}t.updateAttributes({display:o})},n=()=>{t.deleteNode()};return(o,p)=>{const c=be("tooltip");return g(),V(i(We),{triggers:[],shown:e.selected,autoHide:!1},{popper:d(({hide:f})=>[u("div",sn,[u("div",nn,[q((g(),k("button",{onClick:p[0]||(p[0]=l=>r(i(S).FLOAT_LEFT)),class:H({"is-active":i(S).FLOAT_LEFT===s.value}),type:"button"},[a(je)],2)),[[c,o.$t("editor.align_left")]]),q((g(),k("button",{onClick:p[1]||(p[1]=l=>r(i(S).CENTER)),class:H({"is-active":i(S).CENTER===s.value}),type:"button"},[a(Ue)],2)),[[c,o.$t("editor.align_center")]]),q((g(),k("button",{onClick:p[2]||(p[2]=l=>r(i(S).FLOAT_RIGHT)),class:H({"is-active":i(S).FLOAT_RIGHT===s.value}),type:"button"},[a(qe)],2)),[[c,o.$t("editor.align_right")]]),q((g(),V(ae,{onClick:n,destructive:""},{default:d(()=>[a($e)]),_:1})),[[c,o.$t("editor.remove_image")]])])])]),_:1},8,["shown"])}}},rn={class:"drag-handle",contentEditable:"false",draggable:"true","data-drag-handle":""},ln=["src","title","alt","width","height","data-display"],an={key:0,class:"border border-primary-500 h-full left-0 absolute top-0 w-full z-10"},dn=["onMousedown"],le=20,ze=1e5,un={__name:"Image",props:{...ve},setup(e){const t=e,s={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},r=F(()=>t.node.attrs.src),n=F(()=>t.node.attrs.width),o=F(()=>t.node.attrs.height),p=F(()=>t.node.attrs.display),c=F(()=>({"float-none inline-block":p.value===S.INLINE,"flex justify-center":p.value===S.CENTER,"float-left ml-0 mr-md":p.value===S.FLOAT_LEFT,"float-right ml-xs mr-0":p.value===S.FLOAT_RIGHT})),f=B({width:0,height:0}),l=B({width:ze,height:ze}),h=B(!1);Je(async()=>{const w=await Es(r.value);w.complete||(w.width=le,w.height=le),f.value={width:w.width,height:w.height}});const m=()=>{const{width:w}=getComputedStyle(t.editor.view.dom);l.value=parseInt(w,10)},x=()=>{t.editor.commands.setNodeSelection(t.getPos())};Xe(()=>{m()});const A=B({x:0,y:0,w:0,h:0,dir:""}),I=(w,re)=>{w.preventDefault(),w.stopPropagation(),A.value.x=w.clientX,A.value.y=w.clientY;const P=f.value.width,Q=f.value.height,ee=P/Q;let{width:M,height:N}=t.node.attrs;const R=l.value.width;M&&!N?(M=M>R?R:M,N=Math.round(M/ee)):N&&!M?(M=Math.round(N*ee),M=M>R?R:M):!M&&!N?(M=P>R?R:P,N=Math.round(M/ee)):M=M>R?R:M,A.value.w=M,A.value.h=N,A.value.dir=re,h.value=!0,b()},T=w=>{if(w.preventDefault(),w.stopPropagation(),!h.value)return;const{x:re,y:P,w:Q,h:ee,dir:M}=A.value,N=(w.clientX-re)*(/l/.test(M)?-1:1),R=(w.clientY-P)*(/t/.test(M)?-1:1);t.updateAttributes({width:Os(Q+N,le,l.value.width),height:Math.max(ee+R,le)})},$=w=>{w.preventDefault(),w.stopPropagation(),h.value&&(h.value=!1,A.value={x:0,y:0,w:0,h:0,dir:""},v(),x())},b=()=>{document.addEventListener("mousemove",T,!0),document.addEventListener("mouseup",$,!0)},v=()=>{document.removeEventListener("mousemove",T,!0),document.removeEventListener("mouseup",$,!0)};return(w,re)=>(g(),V(i(St),{as:"span",class:H([c.value,"leading-none max-w-full select-none align-baseline"])},{default:d(()=>[u("figure",rn,[u("div",{class:H(["relative inline-block clear-both max-w-full outline-solid outline-1",{"outline-primary-500":w.selected}])},[u("img",{src:r.value,title:w.node.attrs.title,alt:w.node.attrs.alt,width:n.value,height:o.value,"data-display":w.node.attrs.display,class:"cursor-pointer m-0",onClick:x},null,8,ln),w.editor.isEditable?q((g(),k("div",an,[(g(),k(j,null,Qe(s,P=>u("span",{key:P,class:H(["bg-primary-500 border border-white rounded box-border block h-sm w-sm absolute z-10",{tl:"left-[-6px] top-[-6px] cursor-nwse-resize",tr:"right-[-6px] top-[-6px] cursor-nesw-resize",bl:"left-[-6px] bottom-[-6px] cursor-nesw-resize",br:"right-[-6px] bottom-[-6px] cursor-nwse-resize"}[P]]),onMousedown:Q=>I(Q,P)},null,42,dn)),64))],512)),[[Ye,w.selected||h.value]]):Z("",!0),a(on,{editor:w.editor,node:w.node,selected:w.selected,updateAttributes:w.updateAttributes,deleteNode:w.deleteNode},null,8,["editor","node","selected","updateAttributes","deleteNode"])],2)])]),_:1},8,["class"]))}},cn=Bs.extend({inline(){return!0},group(){return"inline"},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:Ps,parseHTML:t=>{const s=t.style.width||t.getAttribute("width")||null;return s==null?null:parseInt(s,10)},renderHTML:t=>({width:t.width})},height:{default:null,parseHTML:t=>{const s=t.style.height||t.getAttribute("height")||null;return s==null?null:parseInt(s,10)},renderHTML:t=>({height:t.height})},display:{default:Ns,parseHTML:t=>{const{cssFloat:s,display:r}=t.style;let n=t.getAttribute("data-display")||t.getAttribute("display");return n?n=/(inline|center|left|right)/.test(n)?n:S.INLINE:s==="left"&&!r?n=S.FLOAT_LEFT:s==="right"&&!r?n=S.FLOAT_RIGHT:!s&&r==="center"?n=S.CENTER:n=S.INLINE,n},renderHTML:t=>({["data-display"]:t.display})}}},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!0,urlPattern:Rs}},addNodeView(){return zt(un)},parseHTML(){return[{tag:"img[src]"}]}}),pn={},mn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},hn=u("path",{d:"M17.061,11.22C17.641,10.462,18,9.526,18,8.5C18,6.019,15.981,4,13.5,4H6v15h8c2.481,0,4.5-2.019,4.5-4.5 C18.5,13.203,17.94,12.042,17.061,11.22z M13.5,7C14.327,7,15,7.673,15,8.5S14.327,10,13.5,10H9V7H13.5z M14,16H9v-3h5 c0.827,0,1.5,0.673,1.5,1.5S14.827,16,14,16z"},null,-1),fn=[hn];function gn(e,t){return g(),k("svg",mn,fn)}const _n=z(pn,[["render",gn]]),vn={},bn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},yn=u("path",{d:"M19 7L19 4 9 4 9 7 11.868 7 9.012 17 5 17 5 20 15 20 15 17 12.132 17 14.988 7z"},null,-1),kn=[yn];function wn(e,t){return g(),k("svg",bn,kn)}const $n=z(vn,[["render",wn]]),xn={},An={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},Cn=u("path",{d:"M5 18H19V20H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},null,-1),Mn=[Cn];function Ln(e,t){return g(),k("svg",An,Mn)}const Tn=z(xn,[["render",Ln]]),Hn={},Sn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},zn=u("path",{d:"M20 11h-8c-4 0-4-1.816-4-2.5C8 7.882 8 6 12 6c2.8 0 2.99 1.678 3 2.014L16 8h1c0-1.384-1.045-4-5-4C6.584 4 6 7.147 6 8.5c0 .728.148 1.667.736 2.5H4v2h8 5.227H20V11zM12 18c-3.793 0-3.99-1.815-4-2H6c0 .04.069 4 6 4 5.221 0 6-2.819 6-4.5 0-.146-.009-.317-.028-.5h-2.006C15.998 15.2 16 15.376 16 15.5 16 16.184 16 18 12 18z"},null,-1),In=[zn];function Vn(e,t){return g(),k("svg",Sn,In)}const Bn=z(Hn,[["render",Vn]]),En={},On={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},Rn=u("path",{d:"M4 6h2v2H4zm0 5h2v2H4zm0 5h2v2H4zm16-8V6H8.023v2H18.8zM8 11h12v2H8zm0 5h12v2H8z"},null,-1),Pn=[Rn];function Nn(e,t){return g(),k("svg",On,Pn)}const Dn=z(En,[["render",Nn]]),Fn={},qn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},Un=u("path",{d:"M5.282 12.064c-.428.328-.72.609-.875.851-.155.24-.249.498-.279.768h2.679v-.748H5.413c.081-.081.152-.151.212-.201.062-.05.182-.142.361-.27.303-.218.511-.42.626-.604.116-.186.173-.375.173-.578 0-.189-.05-.363-.151-.512-.1-.153-.237-.268-.412-.341-.174-.076-.419-.111-.733-.111-.3 0-.537.038-.706.114-.172.078-.302.19-.396.338-.094.143-.159.346-.194.604l.894.076c.025-.188.074-.317.147-.394.072-.073.166-.108.279-.108.11 0 .2.035.272.108.073.071.108.156.108.258 0 .091-.037.19-.108.297C5.711 11.713 5.544 11.865 5.282 12.064zM5.337 18.45c-.114 0-.208-.036-.282-.105-.074-.07-.128-.195-.162-.378L4 18.085c.059.204.142.372.251.506.109.133.248.235.417.306C4.836 18.966 5.067 19 5.36 19c.3 0 .541-.047.725-.14.185-.096.325-.228.424-.403.098-.175.146-.354.146-.544 0-.152-.029-.282-.088-.393-.06-.107-.142-.195-.249-.261-.066-.042-.161-.078-.286-.11.155-.085.268-.183.345-.299.076-.115.113-.24.113-.383 0-.239-.093-.437-.281-.596-.187-.159-.49-.238-.909-.238-.365 0-.648.072-.847.219-.2.143-.334.353-.404.626l.844.151c.023-.162.067-.274.133-.338s.151-.098.257-.098c.103 0 .183.032.241.089.059.06.087.139.087.238 0 .104-.038.193-.117.27s-.177.112-.293.112c-.028 0-.066-.004-.116-.011L5.04 17.54c.123-.036.22-.056.289-.056.132 0 .237.041.313.126.077.082.115.199.115.352 0 .146-.04.266-.119.354C5.558 18.403 5.458 18.45 5.337 18.45zM6.285 8.367V5H5.546C5.451 5.208 5.319 5.383 5.152 5.523 4.984 5.665 4.748 5.785 4.444 5.888v.754C4.65 6.577 4.821 6.509 4.958 6.438c.137-.069.277-.162.423-.276v2.206H6.285zM9 6H20V8H9zM9 11H20V13H9zM9 16H20V18H9z"},null,-1),jn=[Un];function Zn(e,t){return g(),k("svg",qn,jn)}const Gn=z(Fn,[["render",Zn]]),Kn={},Wn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},Jn=u("path",{d:"M3.691 6.292C5.094 4.771 7.217 4 10 4h1v2.819L10.196 6.98c-1.37.274-2.323.813-2.833 1.604C7.05 9.071 6.947 9.591 6.925 10H9h1c.553 0 1 .447 1 1v7c0 1.103-.897 2-2 2H3c-.553 0-1-.447-1-1v-5l.003-2.919C1.994 10.97 1.804 8.34 3.691 6.292zM20 20h-6c-.553 0-1-.447-1-1v-5l.003-2.919c-.009-.111-.199-2.741 1.688-4.789C16.094 4.771 18.217 4 21 4h1v2.819L21.196 6.98c-1.37.274-2.323.813-2.833 1.604C18.05 9.071 17.947 9.591 17.925 10H20h1c.553 0 1 .447 1 1v7C22 19.103 21.103 20 20 20z"},null,-1),Xn=[Jn];function Yn(e,t){return g(),k("svg",Wn,Xn)}const Qn=z(Kn,[["render",Yn]]),eo={},to={viewBox:"0 0 20 20",class:"w-6 h-6 fill-current"},so=u("path",{d:"M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"},null,-1),no=u("path",{d:"M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"},null,-1),oo=u("path",{d:"M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"},null,-1),ro=[so,no,oo];function io(e,t){return g(),k("svg",to,ro)}const lo=z(eo,[["render",io]]),ao={},uo={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},co=u("path",{d:"M4 7h16v2H4zm0-4h16v2H4zm0 8h16v2H4zm0 4h16v2H4zm2 4h12v2H6z"},null,-1),po=[co];function mo(e,t){return g(),k("svg",uo,po)}const ho=z(ao,[["render",mo]]),fo={},go={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},_o=u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"},null,-1),vo=[_o];function bo(e,t){return g(),k("svg",go,vo)}const Ze=z(fo,[["render",bo]]),yo={},ko={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},wo=u("path",{d:"M16.949 14.121 19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0l-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121a2.723 2.723 0 0 1-.844.57L13.414 12l1.414-1.414-.707-.707a4.965 4.965 0 0 0-3.535-1.465c-.235 0-.464.032-.691.066L3.707 2.293 2.293 3.707l18 18 1.414-1.414-5.536-5.536c.277-.184.538-.396.778-.636zm-6.363 3.536a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l1.476-1.475-1.414-1.414L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707z"},null,-1),$o=[wo];function xo(e,t){return g(),k("svg",ko,$o)}const Ao=z(yo,[["render",xo]]),Co=u("label",{for:"href"},"URL",-1),Mo={class:"w-full flex"},Lo={for:"target"},To={value:"_self"},Ho={value:"_blank"},So={__name:"InsertLink",props:{editor:{required:!0}},emits:["insert"],setup(e,{emit:t}){const s=e,r=B(!1),n=B(""),o=B("_self"),p=()=>{r.value=!0;const{href:h,target:m}=s.editor.getAttributes("link");h&&(n.value=h),m&&(o.value=m)},c=()=>{r.value=!1,n.value="",o.value="_self"},f=()=>{s.editor.commands.setLink({href:n.value,target:o.value}),c()},l=()=>{s.editor.chain().focus().unsetLink().run(),c()};return(h,m)=>(g(),k(j,null,[u("button",{onClick:p,class:H([{"is-active":e.editor.isActive("link")},"flex"]),type:"button"},[a(Ze)],2),a(ce,{show:r.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:c},{header:d(()=>[y(_(h.$t("general.insert"))+"/"+_(h.$t("editor.edit_link")),1)]),body:d(()=>[a(O,null,{title:d(()=>[Co]),default:d(()=>[u("div",Mo,[a(te,{type:"text",modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=x=>n.value=x),id:"href",class:"mr-xs"},null,8,["modelValue"]),a(G,{onClick:l,size:"md",disabled:!e.editor.isActive("link")},{icon:d(()=>[a(Ao)]),_:1},8,["disabled"])])]),_:1}),a(O,{class:"mt-lg"},{title:d(()=>[u("label",Lo,_(h.$t("editor.open_link_in")),1)]),default:d(()=>[a(de,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=x=>o.value=x),id:"target"},{default:d(()=>[u("option",To,_(h.$t("editor.current_window")),1),u("option",Ho,_(h.$t("editor.new_window")),1)]),_:1},8,["modelValue"])]),_:1})]),footer:d(()=>[a(G,{onClick:c,class:"mr-xs"},{default:d(()=>[y(_(h.$t("general.cancel")),1)]),_:1}),a(ne,{onClick:f},{default:d(()=>[y(_(h.$t("general.insert")),1)]),_:1})]),_:1},8,["show"])],64))}},zo={},Io={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current"},Vo=u("path",{d:"M4 11h16v2H4z","fill-rule":"evenodd"},null,-1),Bo=[Vo];function Eo(e,t){return g(),k("svg",Io,Bo)}const Oo=z(zo,[["render",Eo]]),Ro=(e,t,s)=>{const r=e.replace().split(/(?:\r\n?|\n)/),n=[];r.forEach(p=>{const c={type:"paragraph"};p.length>0&&(c.content=[{type:"text",text:p}]);const f=It.fromJSON(t.doc.type.schema,c);n.push(f)});const o=_e.fromArray(n);return Ce.maxOpen(o)},Po={key:0,class:"editorClassicMenu text-stone-800 flex flex-wrap gap-xs border-b border-gray-200 pb-md mb-md"},No={type:"button",class:"w-28 text-left h-full"},Do=u("span",{class:"text-2xl"},"Heading 1",-1),Fo=u("span",{class:"text-xl"},"Heading 2",-1),qo=u("span",{class:"text-lg"},"Heading 3",-1),Uo=u("span",{class:"text-md"},"Heading 4",-1),jo=u("span",{class:"text-base"},"Heading 5",-1),Zo=u("span",{class:"text-sm"},"Heading 6",-1),Go=["disabled"],Ko=["disabled"],Wo=["disabled"],Jo=["disabled"],Xo={type:"button"},Yo={__name:"EditorClassic",props:{value:{required:!0},editable:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){et();const s=e,r=t;B();const n=B(!1),o=Vt({editable:s.editable,content:s.value,extensions:[Ss,zs,Is.configure({types:["heading","paragraph"]}),cn,Bt.configure({openOnClick:!1})],editorProps:{attributes:{class:"focus:outline-none min-h-[150px]"},clipboardTextParser:Ro},onUpdate:()=>{r("update",o.value.getHTML())},onFocus:()=>{n.value=!0},onBlur:()=>{n.value=!1}});tt(()=>{o.value.destroy()}),Ie(()=>s.value,f=>{f!==o.value.getHTML()&&o.value.commands.setContent(f)});const p=F(()=>o.value.isActive("heading",{level:1})?"Heading 1":o.value.isActive("heading",{level:2})?"Heading 2":o.value.isActive("heading",{level:3})?"Heading 3":o.value.isActive("heading",{level:4})?"Heading 4":o.value.isActive("heading",{level:5})?"Heading 5":o.value.isActive("heading",{level:6})?"Heading 6":"Paragraph"),c=f=>{o.value.chain().focus().setImage({src:f}).run()};return(f,l)=>{const h=be("tooltip");return g(),k("div",{class:H([{"border-primary-200 ring ring-primary-200 ring-opacity-50":n.value},"editorClassic border border-gray-200 rounded-md p-md pb-xs text-base transition-colors ease-in-out duration-200"])},[i(o)?(g(),k("div",Po,[a(Ve,{"width-classes":"w-40",placement:"bottom-start"},{trigger:d(()=>[u("button",No,_(p.value),1)]),content:d(()=>[a(D,{onClick:l[0]||(l[0]=m=>i(o).chain().focus().setParagraph().run()),isActive:i(o).isActive("paragraph"),size:"xs",as:"button"},{default:d(()=>[y(" Paragraph ")]),_:1},8,["isActive"]),a(D,{onClick:l[1]||(l[1]=m=>i(o).chain().focus().toggleHeading({level:1}).run()),isActive:i(o).isActive("heading",{level:1}),size:"xs",as:"button"},{default:d(()=>[Do]),_:1},8,["isActive"]),a(D,{onClick:l[2]||(l[2]=m=>i(o).chain().focus().toggleHeading({level:2}).run()),isActive:i(o).isActive("heading",{level:2}),size:"xs",as:"button"},{default:d(()=>[Fo]),_:1},8,["isActive"]),a(D,{onClick:l[3]||(l[3]=m=>i(o).chain().focus().toggleHeading({level:3}).run()),isActive:i(o).isActive("heading",{level:3}),size:"xs",as:"button"},{default:d(()=>[qo]),_:1},8,["isActive"]),a(D,{onClick:l[4]||(l[4]=m=>i(o).chain().focus().toggleHeading({level:4}).run()),isActive:i(o).isActive("heading",{level:4}),size:"xs",as:"button"},{default:d(()=>[Uo]),_:1},8,["isActive"]),a(D,{onClick:l[5]||(l[5]=m=>i(o).chain().focus().toggleHeading({level:5}).run()),isActive:i(o).isActive("heading",{level:5}),size:"xs",as:"button"},{default:d(()=>[jo]),_:1},8,["isActive"]),a(D,{onClick:l[6]||(l[6]=m=>i(o).chain().focus().toggleHeading({level:6}).run()),isActive:i(o).isActive("heading",{level:6}),size:"xs",as:"button"},{default:d(()=>[Zo]),_:1},8,["isActive"])]),_:1}),u("button",{onClick:l[7]||(l[7]=m=>i(o).chain().focus().toggleBold().run()),disabled:!i(o).can().chain().focus().toggleBold().run(),class:H({"is-active":i(o).isActive("bold")}),type:"button"},[a(_n)],10,Go),u("button",{onClick:l[8]||(l[8]=m=>i(o).chain().focus().toggleItalic().run()),disabled:!i(o).can().chain().focus().toggleItalic().run(),class:H({"is-active":i(o).isActive("italic")}),type:"button"},[a($n)],10,Ko),u("button",{onClick:l[9]||(l[9]=m=>i(o).chain().focus().toggleUnderline().run()),disabled:!i(o).can().chain().focus().toggleItalic().run(),class:H({"is-active":i(o).isActive("underline")}),type:"button"},[a(Tn)],10,Wo),u("button",{onClick:l[10]||(l[10]=m=>i(o).chain().focus().toggleStrike().run()),disabled:!i(o).can().chain().focus().toggleStrike().run(),class:H([{"is-active":i(o).isActive("strike")},"mr-sm"]),type:"button"},[a(Bn)],10,Jo),u("button",{onClick:l[11]||(l[11]=m=>i(o).chain().focus().setTextAlign("left").run()),class:H({"is-active":i(o).isActive({textAlign:"left"})}),type:"button"},[a(je)],2),u("button",{onClick:l[12]||(l[12]=m=>i(o).chain().focus().setTextAlign("center").run()),class:H({"is-active":i(o).isActive({textAlign:"center"})}),type:"button"},[a(Ue)],2),u("button",{onClick:l[13]||(l[13]=m=>i(o).chain().focus().setTextAlign("right").run()),class:H({"is-active":i(o).isActive({textAlign:"right"})}),type:"button"},[a(qe)],2),u("button",{onClick:l[14]||(l[14]=m=>i(o).chain().focus().setTextAlign("justify").run()),class:H([{"is-active":i(o).isActive({textAlign:"justify"})},"mr-sm"]),type:"button"},[a(ho)],2),u("button",{onClick:l[15]||(l[15]=m=>i(o).chain().focus().toggleBulletList().run()),class:H({"is-active":i(o).isActive("bulletList")}),type:"button"},[a(Dn)],2),u("button",{onClick:l[16]||(l[16]=m=>i(o).chain().focus().toggleOrderedList().run()),class:H([{"is-active":i(o).isActive("orderedList")},"mr-sm"]),type:"button"},[a(Gn)],2),u("button",{onClick:l[17]||(l[17]=m=>i(o).chain().focus().toggleBlockquote().run()),class:H({"is-active":i(o).isActive("blockquote")}),type:"button"},[a(Qn)],2),q((g(),k("button",{onClick:l[18]||(l[18]=m=>i(o).chain().focus().setHardBreak().run()),type:"button"},[a(lo)])),[[h,f.$t("editor.hard_break")]]),q((g(),k("button",{onClick:l[19]||(l[19]=m=>i(o).chain().focus().setHorizontalRule().run()),class:"mr-sm",type:"button"},[a(Oo)])),[[h,f.$t("editor.horizontal_line")]]),a(Ot,{onUpload:l[20]||(l[20]=m=>{if(m.is_local_driver){c(`/storage/${m.path}`);return}c(m.url)}),class:"flex"},{default:d(()=>[q((g(),k("button",Xo,[a(st)])),[[h,f.$t("post.add_image")]])]),_:1}),a(So,{editor:i(o)},null,8,["editor"])])):Z("",!0),a(i(Et),{editor:i(o),class:"editor-classic-format max-h-96 overflow-y-auto p-xs"},null,8,["editor"])],2)}}},Qo={__name:"Editor",props:{content:{required:!0,type:Object}},setup(e){return(t,s)=>(g(),V(Yo,{value:e.content.body,onUpdate:s[0]||(s[0]=r=>e.content.body=r)},null,8,["value"]))}},er=u("label",{for:"m_html"},"HTML",-1),tr={__name:"Html",props:{content:{required:!0,type:Object}},setup(e){return(t,s)=>(g(),V(O,null,{title:d(()=>[er]),default:d(()=>[a(Re,{id:"m_html",modelValue:e.content.body,"onUpdate:modelValue":s[0]||(s[0]=r=>e.content.body=r),class:"min-h-[350px]"},null,8,["modelValue"])]),_:1}))}},Ge=()=>({modules:{Editor:{content:{body:""},component:Qo},Html:{content:{body:""},component:tr}}}),sr={class:"flex items-center mb-lg gap-lg"},nr={class:"w-full md:w-1/2"},or={for:"m_name"},rr={class:"w-full md:w-1/2"},ir={for:"m_status"},lr={value:1},ar={value:0},Ke={__name:"FormBlock",props:{form:{required:!0},moduleComponent:{required:!0}},setup(e){return(t,s)=>(g(),k(j,null,[u("div",sr,[u("div",nr,[a(O,null,{title:d(()=>[u("label",or,[y(_(t.$t("general.name"))+" ",1),a(fe,{danger:!0},{default:d(()=>[y("*")]),_:1})])]),footer:d(()=>[a(U,{message:e.form.errors.name},null,8,["message"])]),default:d(()=>[a(te,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>e.form.name=r),type:"text",id:"m_name",class:"w-full",autofocus:!0,error:e.form.errors.name!==void 0,required:""},null,8,["modelValue","error"])]),_:1})]),u("div",rr,[a(O,null,{title:d(()=>[u("label",ir,_(t.$t("general.status")),1)]),footer:d(()=>[a(U,{message:e.form.errors.status},null,8,["message"])]),default:d(()=>[a(de,{modelValue:e.form.status,"onUpdate:modelValue":s[1]||(s[1]=r=>e.form.status=r),error:e.form.errors.status!==void 0,id:"m_status"},{default:d(()=>[u("option",lr,_(t.$t("general.enabled")),1),u("option",ar,_(t.$t("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1})])]),(g(),V(nt(e.moduleComponent),{content:e.form.content},null,8,["content"]))],64))}},dr={class:"font-semibold capitalize"},ur={class:"mt-xs"},cr={__name:"EditBlock",props:{block:{required:!0,type:Object}},emits:["update","delete"],setup(e,{emit:t}){const{t:s}=ye(),r=J("routePrefix"),n=J("confirmation"),o=e,p=t,{notify:c}=we(),{modules:f}=Ge(),l=B(!1),h=Be(null),m=ke(oe.exports.cloneDeep(o.block)),x=()=>{const b=f[o.block.module];if(b===void 0){c("error",s("page.module_not_found"));return}h.value=b.component,l.value=!0},A=()=>{l.value=!1,m.reset()},I=()=>{if(!m.isDirty){A();return}n().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(b=>{b.close(),A()}).show()},T=()=>{m.put(route(`${r}.blocks.update`,{block:o.block.id}),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:b=>{const v=b.props.blocks.data.find(w=>w.id===o.block.id);v&&p("update",v),c("success",s("page.block_updated"))}})},$=()=>{n().title(s("page.delete_block")).description(s("page.confirm_delete_block")).destructive().onConfirm(b=>{b.isLoading(!0),Oe.delete(route(`${r}.blocks.delete`,{block:o.block.id}),{only:["blocks"],onSuccess(){c("success",s("page.block_deleted")),p("delete"),b.reset(),A()},onFinish(){b.isLoading(!1)}})}).show()};return(b,v)=>(g(),k(j,null,[a(ae,{onClick:x,class:"group-visible"},{icon:d(()=>[a(ot)]),_:1}),a(ce,{show:l.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:I},{header:d(()=>[u("span",null,[y(_(i(s)("page.edit_block"))+"[",1),u("span",dr,_(i(m).module),1),y("]")])]),body:d(()=>[u("div",ur,[l.value?(g(),V(Ke,{key:0,form:i(m),moduleComponent:h.value},null,8,["form","moduleComponent"])):Z("",!0)])]),footer:d(()=>[a(G,{onClick:I,class:"mr-xs"},{default:d(()=>[y(_(i(s)("general.cancel")),1)]),_:1}),a(Ee,{onClick:$,class:"mr-xs"},{default:d(()=>[y(_(i(s)("general.delete")),1)]),_:1}),a(ne,{onClick:T,disabled:i(m).processing,isLoading:i(m).processing},{default:d(()=>[y(_(i(s)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},pr={class:"flex items-center justify-between"},mr={class:"w-full"},hr={class:"flex"},fr={class:"flex"},gr={class:"font-medium"},_r={class:"font-medium text-gray-400"},vr={class:"flex justify-end"},br={class:"flex mr-xs"},yr={__name:"PageAttachedBlocks",props:{modelValue:{required:!0,type:Array}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=t,n=(c,f,l)=>{const h=s.modelValue.map(m=>m.id===f?Object.assign(m,Object.assign(l,{random_key:m.random_key===c?c:Pe()})):m);r("update:modelValue",h)},o=c=>{const f=oe.exports.cloneDeep(s.modelValue).filter(l=>l.id!==c);r("update:modelValue",f)},p=c=>{r("update:modelValue",s.modelValue.filter((f,l)=>l!==c))};return(c,f)=>{const l=be("tooltip");return e.modelValue.length?(g(),V(bt,{key:0},{default:d(()=>[a(i(_t),rt({list:e.modelValue},{animation:200,group:"blocks"},{handle:".handle","item-key":"random_key"}),{item:d(({element:h,index:m})=>[a(vt,{class:"group"},{default:d(()=>[u("div",pr,[u("div",mr,[u("div",hr,[a(ae,{class:"handle mr-xs cursor-move"},{icon:d(()=>[a(qt)]),_:1}),u("div",null,[u("div",fr,[u("div",gr,_(h.name),1)]),u("div",_r,_(h.module),1)])])]),u("div",vr,[h.status?Z("",!0):(g(),V(it,{key:0,variant:"error",class:"mr-xs"},{default:d(()=>[y(_(c.$t("general.disabled")),1)]),_:1})),u("div",br,[a(cr,{block:h,onDelete:x=>o(h.id),onUpdate:x=>n(h.random_key,h.id,x)},null,8,["block","onDelete","onUpdate"])]),q((g(),V(ae,{onClick:x=>p(m),destructive:!0,class:"group-visible"},{icon:d(()=>[a($e)]),_:2},1032,["onClick"])),[[l,c.$t("page.remove_from_page")]])])])]),_:2},1024)]),_:1},16,["list"])]),_:1})):(g(),V(Ne,{key:1},{default:d(()=>[y(_(c.$t("page.page_no_blocks_added")),1)]),_:1}))}}},kr={class:"relative"},wr={__name:"AddExistingBlock",props:{modelValue:{required:!0,type:Array},blocks:{required:!0,type:Object,default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=B(!1),r=B(null),n=e,o=t,p=F(()=>n.blocks.data.map(m=>({key:m.id,label:m.name}))),c=()=>{const m=n.blocks.data.find(x=>x.id===r.value.key);return m?oe.exports.cloneDeep(m):null},f=()=>{const m=c();!m||(o("update:modelValue",[...n.modelValue,Object.assign(m,{random_key:Pe()})]),h())},l=()=>{s.value=!0},h=()=>{s.value=!1,r.value=null};return(m,x)=>{const A=lt("v-select");return g(),k(j,null,[a(G,{onClick:l,size:"sm",class:"mr-xs"},{icon:d(()=>[a(Ze)]),default:d(()=>[y(" "+_(m.$t("page.add_existing_block")),1)]),_:1}),a(ce,{show:s.value,"max-width":"sm","scrollable-body":!0,closeable:!0,onClose:h},{header:d(()=>[y(_(m.$t("page.add_existing_block")),1)]),body:d(()=>[u("div",kr,[p.value.length?(g(),k(j,{key:0},[s.value?(g(),V(A,{key:0,modelValue:r.value,"onUpdate:modelValue":x[0]||(x[0]=I=>r.value=I),options:p.value,filterable:!1,clearable:!1,"close-on-select":!0,placeholder:m.$t("page.search_blocks"),"append-to-body":""},{"no-options":d(({search:I,searching:T,loading:$})=>[y(_(m.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])):Z("",!0)],64)):(g(),V(Ne,{key:1},{default:d(()=>[y(_(m.$t("page.no_blocks_created")),1)]),_:1}))])]),footer:d(()=>[a(G,{onClick:h,class:"mr-xs"},{default:d(()=>[y(_(m.$t("general.cancel")),1)]),_:1}),p.value.length?(g(),V(ne,{key:0,onClick:f,disabled:!r.value},{default:d(()=>[y(_(m.$t("page.add_to_page")),1)]),_:1},8,["disabled"])):Z("",!0)]),_:1},8,["show"])],64)}}},$r={class:"font-semibold capitalize"},xr={class:"mt-xs"},Ar={__name:"CreateBlock",emits:["add"],setup(e,{emit:t}){const{t:s}=ye(),r=J("routePrefix"),n=J("confirmation"),o=t,{notify:p}=we(),{modules:c}=Ge(),f=B(!1),l=Be(null),h=ke({name:"",module:null,content:{},status:1}),m=T=>{const $=c[T];if($===void 0){p("error",s("page.module_not_found"));return}l.value=$.component,h.content=oe.exports.cloneDeep($.content),h.module=T,f.value=!0},x=()=>{f.value=!1,h.reset()},A=()=>{if(!h.isDirty){x();return}n().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(T=>{T.close(),x()}).show()},I=()=>{h.post(route(`${r}.blocks.store`),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:T=>{o("add",T.props.blocks.data[0]),x(),p("success",s("page.block_created")+`
`+s("page.save_page"))}})};return(T,$)=>(g(),k(j,null,[a(Ve,{"width-classes":"w-32",placement:"bottom"},{trigger:d(()=>[a(G,{size:"sm",class:"mr-xs"},{icon:d(()=>[a(at)]),default:d(()=>[y(" "+_(i(s)("page.create_block")),1)]),_:1})]),content:d(()=>[a(D,{as:"button",onClick:$[0]||($[0]=b=>m("Editor"))},{default:d(()=>[y(" Editor ")]),_:1}),a(D,{as:"button",onClick:$[1]||($[1]=b=>m("Html"))},{default:d(()=>[y(" Html ")]),_:1})]),_:1}),a(ce,{show:f.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:A},{header:d(()=>[u("span",null,[y(_(i(s)("page.create_block"))+" [",1),u("span",$r,_(i(h).module),1),y("]")])]),body:d(()=>[u("div",xr,[f.value?(g(),V(Ke,{key:0,form:i(h),moduleComponent:l.value},null,8,["form","moduleComponent"])):Z("",!0)])]),footer:d(()=>[a(G,{onClick:A,class:"mr-xs"},{default:d(()=>[y(_(i(s)("general.cancel")),1)]),_:1}),a(ne,{onClick:I,disabled:i(h).processing,isLoading:i(h).processing},{default:d(()=>[y(_(i(s)("page.create_add_to_page")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},Cr={class:"flex items-center mt-lg"},Mr={__name:"PageBlocks",props:{page:{required:!0,type:Object}},setup(e){const t=e,s=r=>{t.page.blocks.push(r)};return(r,n)=>(g(),k("div",null,[a(yr,{modelValue:e.page.blocks,"onUpdate:modelValue":n[0]||(n[0]=o=>e.page.blocks=o)},null,8,["modelValue"]),u("div",Cr,[a(wr,{modelValue:e.page.blocks,"onUpdate:modelValue":n[1]||(n[1]=o=>e.page.blocks=o),blocks:r.$page.props.blocks},null,8,["modelValue","blocks"]),a(Ar,{onAdd:s})])]))}},Lr={class:"row-py w-full mx-auto"},Tr={key:0,class:"flex"},Hr=["href"],Sr={class:"row-px"},zr={class:"flex gap-lg"},Ir={class:"w-2/3"},Vr={for:"name"},Br={for:"meta_title"},Er={for:"meta_description"},Or={class:"w-1/3"},Rr={for:"slug"},Pr=["innerHTML"],Nr={for:"layout"},Dr={value:"default"},Fr={value:"medium"},qr={value:"small"},Ur={for:"status"},jr={value:1},Zr={value:0},Gr={class:"flex items-center mt-lg"},Kr=dt({layout:pt}),fi=Object.assign(Kr,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},page:{type:[Object,null]}},setup(e){const{t}=ye(),s=e,{notify:r}=we(),n=J("routePrefix"),o=J("confirmation"),p=F(()=>c.value?t("page.create_page"):t("page.edit_page")),{isCreate:c,isEdit:f}=mt(),l=ke(f.value?oe.exports.cloneDeep(s.page):{name:"",meta_title:"",meta_description:"",slug:"",layout:"default",status:1,blocks:[]}),h=()=>{Ie(()=>s.page.blocks,$=>{l.blocks=$})};f.value&&h();const m=()=>{l.slug=s.page.slug},x=$=>{$.post(route(`${n}.pages.store`),{onSuccess:()=>{m(),r("success",t("page.page_created"))}})},A=$=>{$.put(route(`${n}.pages.update`,{page:s.page.uuid}),{preserveScroll:!0,onSuccess:()=>{m(),r("success",t("page.page_updated"))}})},I=()=>{o().title(t("page.delete_page")).description(t("page.confirm_delete_page")).destructive().onConfirm($=>{$.isLoading(!0),Oe.delete(route(`${n}.pages.delete`,{page:s.page.uuid}),{preserveScroll:!0,onSuccess(){r("success",t("page.page_deleted"))},onFinish(){$.reset()}})}).show()},T=()=>{const $=l.transform(b=>({...b,blocks:b.blocks.map(v=>v.id)}));c.value&&x($),f.value&&A($)};return($,b)=>(g(),k(j,null,[a(i(ct),{title:p.value},null,8,["title"]),u("div",Lr,[a(ht,{title:p.value},{description:d(()=>[y(_(i(t)("page.page_desc")),1)]),default:d(()=>[i(f)?(g(),k("div",Tr,[u("a",{href:$.route(`${i(n)}.pages.show`,{slug:e.page.url_path}),target:"_blank",class:"mr-xs"},[a(G,{size:"sm"},{icon:d(()=>[a(ft)]),default:d(()=>[y(" "+_(i(t)("general.open")),1)]),_:1})],8,Hr),a(Ee,{onClick:I,size:"sm"},{icon:d(()=>[a($e)]),_:1})])):Z("",!0)]),_:1},8,["title"]),u("div",Sr,[u("form",{method:"post",onSubmit:ut(T,["prevent"])},[u("div",zr,[u("div",Ir,[a(me,null,{title:d(()=>[y(_(i(t)("general.details")),1)]),default:d(()=>[a(O,null,{title:d(()=>[u("label",Vr,[y(_(i(t)("general.name"))+" ",1),a(fe,{danger:!0},{default:d(()=>[y("*")]),_:1})])]),footer:d(()=>[a(U,{message:i(l).errors.name},null,8,["message"])]),default:d(()=>[a(te,{modelValue:i(l).name,"onUpdate:modelValue":b[0]||(b[0]=v=>i(l).name=v),error:i(l).errors.name!==void 0,type:"text",id:"name",class:"w-full",autofocus:i(c),required:""},null,8,["modelValue","error","autofocus"])]),_:1}),a(O,{class:"mt-lg"},{title:d(()=>[u("label",Br,_(i(t)("page.meta_title")),1)]),footer:d(()=>[a(U,{message:i(l).errors.meta_title},null,8,["message"])]),default:d(()=>[a(te,{modelValue:i(l).meta_title,"onUpdate:modelValue":b[1]||(b[1]=v=>i(l).meta_title=v),error:i(l).errors.meta_title!==void 0,type:"text",id:"meta_title",class:"w-full"},null,8,["modelValue","error"])]),_:1}),a(O,{class:"mt-lg"},{title:d(()=>[u("label",Er,_(i(t)("page.meta_description")),1)]),footer:d(()=>[a(U,{message:i(l).errors.meta_description},null,8,["message"])]),default:d(()=>[a(Re,{modelValue:i(l).meta_description,"onUpdate:modelValue":b[2]||(b[2]=v=>i(l).meta_description=v),error:i(l).errors.meta_description!==void 0,id:"meta_description",class:"w-full"},null,8,["modelValue","error"])]),_:1})]),_:1}),a(me,{class:"mt-lg"},{title:d(()=>[y(_(i(t)("general.blocks")),1)]),default:d(()=>[a(Mr,{page:i(l)},null,8,["page"])]),_:1})]),u("div",Or,[a(me,null,{default:d(()=>[a(O,null,{title:d(()=>[u("label",Rr,[y(_(i(t)("page.url_path"))+" ",1),a(fe,{danger:!0},{default:d(()=>[y("*")]),_:1}),u("span",{innerHTML:i(t)("page.type_home"),class:"text-sm text-gray-400 inline-block ml-xs font-normal"},null,8,Pr)])]),footer:d(()=>[a(U,{message:i(l).errors.slug},null,8,["message"])]),default:d(()=>[a(te,{modelValue:i(l).slug,"onUpdate:modelValue":b[3]||(b[3]=v=>i(l).slug=v),error:i(l).errors.slug!==void 0,type:"text",id:"slug",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),a(O,{class:"mt-lg"},{title:d(()=>[u("label",Nr,_(i(t)("page.container_width")),1)]),footer:d(()=>[a(U,{message:i(l).errors.layout},null,8,["message"])]),default:d(()=>[a(de,{modelValue:i(l).layout,"onUpdate:modelValue":b[4]||(b[4]=v=>i(l).layout=v),error:i(l).errors.layout!==void 0,id:"layout"},{default:d(()=>[u("option",Dr,_(i(t)("general.default")),1),u("option",Fr,_(i(t)("page.medium")),1),u("option",qr,_(i(t)("page.small")),1)]),_:1},8,["modelValue","error"])]),_:1}),a(O,{class:"mt-lg"},{title:d(()=>[u("label",Ur,_(i(t)("general.status")),1)]),footer:d(()=>[a(U,{message:i(l).errors.status},null,8,["message"])]),default:d(()=>[a(de,{modelValue:i(l).status,"onUpdate:modelValue":b[5]||(b[5]=v=>i(l).status=v),error:i(l).errors.status!==void 0,id:"status"},{default:d(()=>[u("option",jr,_(i(t)("general.enabled")),1),u("option",Zr,_(i(t)("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1}),u("div",Gr,[a(ne,{type:"submit",disabled:i(l).processing,isLoading:i(l).processing},{default:d(()=>[y(_(i(c)?i(t)("general.create"):i(t)("general.update")),1)]),_:1},8,["disabled","isLoading"])])]),_:1})])])],32)])])],64))}});export{fi as default};
