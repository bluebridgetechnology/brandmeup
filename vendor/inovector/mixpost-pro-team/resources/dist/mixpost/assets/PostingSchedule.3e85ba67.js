import{I as T,R as P,o as d,c as p,e as i,a as n,w as a,t as o,F as $,r as V,b as t,H as B,f as _,k as E,V as U,g as A,h as H,l as F,u as S,j as w,X as W,cH as Z,i as z,T as Y,cz as q,Z as K,S as C,Y as L,n as R}from"./app.3dbb9f4f.js";import{_ as X}from"./PageHeader.5278f6a5.js";import{_ as b}from"./Panel.1435ce07.js";import{W as I}from"./constants.9689ba33.js";import{u as j}from"./useSettings.2a969dc9.js";import{_ as G}from"./Select.2234a951.js";import{E as J}from"./ExclamationCircle.5d8a3fe5.js";import{F as M,_ as O}from"./Switch.17a6d147.js";import{_ as Q}from"./PureDangerButton.aa10c267.js";import"./Flex.781629fc.js";import"./vue.runtime.esm-bundler.d43166be.js";const ee={class:"flex flex-col sm:flex-row gap-sm sm:gap-0"},te={value:"everyday"},se=["value"],oe={class:"mr-xs text-gray-400"},ie={class:"w-auto",ref:"timePicker"},ae={class:"text-sm flex items-center mt-md"},le={class:"mr-xs"},ne={__name:"AddPostingTime",props:["modelValue"],emits:["update:modelValue"],setup(g,{emit:u}){const f=g,h=u,{timeZone:k,timeFormat:c}=j(),l=T({day:"everyday",time:"06:30"}),x={inline:!0,timeFormat:"H:i",noCalendar:!0,enableTime:!0,time_24hr:c===24},y=()=>{const m=F.exports.cloneDeep(f.modelValue),e=l.value.day==="everyday";if(!e){const r=m.findIndex(s=>parseInt(s.id)===parseInt(l.value.day));m[r].times.push({value:l.value.time,format:l.value.format})}e&&m.forEach(r=>{r.times.push({value:l.value.time,format:l.value.format})}),h("update:modelValue",m)};return(m,e)=>{const r=P("tooltip");return d(),p($,null,[i("div",ee,[i("div",null,[n(G,{modelValue:l.value.day,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.day=s)},{default:a(()=>[i("option",te,o(m.$t("posting_schedule.everyday")),1),(d(!0),p($,null,V(t(I),s=>(d(),p("option",{key:s.id,value:s.id},o(m.$t(`calendar.weekdays.${s.key}.full`)),9,se))),128))]),_:1},8,["modelValue"])]),i("div",{class:B([{"sm:w-40":t(c)===12,"sm:w-56":t(c)===24},"pickTime flex items-center sm:justify-center sm:mr-lg sm:-mt-1"])},[i("div",oe,o(m.$t("general.time")),1),i("div",ie,[n(t(M),{modelValue:l.value.time,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.time=s),config:x},null,8,["modelValue"])],512)],2),i("div",null,[n(E,{onClick:y},{default:a(()=>[_(o(m.$t("posting_schedule.add_post_time")),1)]),_:1})])]),i("div",ae,[i("div",le,o(t(k)),1),U((d(),A(t(H),{href:m.route("br.profile.index")},{default:a(()=>[n(J,{class:"!w-4 !h-4"})]),_:1},8,["href"])),[[r,m.$t("posting_schedule.posting_times_determined")]])])],64)}}},re={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-xs"},ue={class:"font-medium text-center"},me={class:"flex justify-center mt-xs"},de={class:"mr-xs"},ce={key:0},pe={key:1},_e={class:"flex flex-col justify-center mt-xs mx-auto"},fe={key:0,class:"text-gray-500 text-sm text-center"},ge=i("span",null,":",-1),ve={class:"uppercase"},he={class:"absolute right-0 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-200"},xe={__name:"PostingTimes",props:{times:{type:Array,default:[]}},emits:["update"],setup(g,{emit:u}){const{t:f}=S(),h=g,{timeZone:k,timeFormat:c}=j(),l=e=>{const r=I.find(s=>s.id===e);return r?f(`calendar.weekdays.${r.key}.full`):null},x=e=>F.exports.sortBy(e.times,[s=>s.value]).map(s=>({value:y(s.value)})),y=e=>c===12?Z(e,"hh:mm aaa"):e,m=(e,r)=>{h.times[e].times.splice(r,1)};return(e,r)=>(d(),p("div",re,[(d(!0),p($,null,V(g.times,(s,D)=>(d(),p("div",{key:s.id,class:"flex flex-col border border-gray-300 rounded-lg p-xs"},[i("div",ue,o(l(s.id)),1),i("div",me,[n(O,{modelValue:s.status,"onUpdate:modelValue":v=>s.status=v},{default:a(()=>[i("span",de,[s.status?(d(),p("span",ce,o(t(f)("general.on")),1)):w("",!0),s.status?w("",!0):(d(),p("span",pe,o(t(f)("general.off")),1))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("div",_e,[s.times.length?w("",!0):(d(),p("span",fe,o(t(f)("general.empty")),1)),s.times.length?(d(!0),p($,{key:1},V(x(s),(v,N)=>(d(),p("div",{key:v.value,class:"relative flex items-center justify-between px-lg py-xs group text-gray-500 text-sm"},[i("span",null,o(v.value.split(":")[0]),1),ge,i("span",null,o(v.value.split(":")[1]),1),i("span",ve,o(v.format),1),i("span",he,[n(Q,{onClick:ke=>m(D,N)},{default:a(()=>[n(W,{class:"!w-5 !-5"})]),_:2},1032,["onClick"])])]))),128)):w("",!0)])]))),128))]))}},ye={class:"w-full mx-auto row-py"},$e={class:"w-full row-px"},Ne={__name:"PostingSchedule",props:{times:{required:!0,type:Array}},setup(g){const{t:u}=S(),f=z("workspaceCtx"),h=g,{notify:k}=R(),c=Y({times:h.times}),l=T(!1),x=()=>{c.times.forEach(m=>{m.times=[]}),l.value=!1},y=()=>{c.put(route("br.postingSchedule.update",{workspace:f.id}),{preserveScroll:!0,onSuccess(){k("success",u("posting_schedule.posting_times_updated"))}})};return(m,e)=>(d(),p($,null,[n(t(K),{title:t(u)("posting_schedule.posting_schedule")},null,8,["title"]),i("div",ye,[n(X,{title:t(u)("posting_schedule.posting_schedule")},{description:a(()=>[_(o(t(u)("posting_schedule.send_posting_schedule")),1)]),_:1},8,["title"]),i("div",$e,[n(b,null,{title:a(()=>[_(o(t(u)("posting_schedule.add_new_posting_time")),1)]),default:a(()=>[n(ne,{modelValue:t(c).times,"onUpdate:modelValue":e[0]||(e[0]=r=>t(c).times=r)},null,8,["modelValue"])]),_:1}),n(b,{class:"mt-lg"},{title:a(()=>[_(o(t(u)("posting_schedule.posting_times")),1)]),description:a(()=>[_(o(t(u)("posting_schedule.send_posting_schedule")),1)]),action:a(()=>[n(C,{onClick:e[1]||(e[1]=r=>l.value=!0)},{default:a(()=>[_(o(t(u)("posting_schedule.clear_all_posting_times")),1)]),_:1})]),default:a(()=>[n(xe,{times:t(c).times},null,8,["times"])]),_:1}),n(E,{onClick:y,disabled:t(c).processing,class:"mt-md"},{default:a(()=>[_(o(t(u)("posting_schedule.update_posting_times")),1)]),_:1},8,["disabled"])])]),n(q,{show:l.value,variant:"danger",onClose:e[3]||(e[3]=r=>l.value=!1)},{header:a(()=>[_(o(t(u)("posting_schedule.clear_all_posting_times")),1)]),body:a(()=>[_(o(t(u)("posting_schedule.confirmation_posting_times")),1)]),footer:a(()=>[n(C,{onClick:e[2]||(e[2]=r=>l.value=!1),class:"mr-xs"},{default:a(()=>[_(o(t(u)("general.cancel")),1)]),_:1}),n(L,{onClick:x},{default:a(()=>[_(o(t(u)("general.delete")),1)]),_:1})]),_:1},8,["show"])],64))}};export{Ne as default};
