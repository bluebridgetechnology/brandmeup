import{cB as $,cC as T,cD as I,cE as me,cF as xe,cG as ee,N as p,o as l,c as d,t as S,a as u,w as O,f as B,S as z,e as y,a7 as U,l as C,F as M,r as F,i as A,cH as ye,I as j,R as $e,aW as te,j as q,V as be,g as P,ac as Oe,cI as b,H,a5 as ve,cJ as W,al as se,A as pe,cK as ne,cL as Me,b as Z,p as Te,ag as oe,cM as le,ah as Ce,aE as Ze,bJ as K,aJ as qe,af as ie,Z as Fe}from"./app.3dbb9f4f.js";import{u as fe}from"./useSettings.2a969dc9.js";import{a as he,C as _e}from"./ChevronLeft.cbb2bb07.js";import{p as V}from"./index.17e2a1f5.js";import{W as ge}from"./constants.9689ba33.js";import{u as Ie,_ as ce,a as Ne}from"./VerticallyScrollableContent.219a26b7.js";import{u as je}from"./usePostVersions.f18e2fc4.js";import{_ as Pe}from"./ProviderIcon.fe1a63e2.js";import{_ as We,a as Ve}from"./PostsFilter.9a745bd5.js";import{C as Ae}from"./Clock.25c8faac.js";import"./Variable.cb6cad2c.js";import"./index.d961b7a1.js";import"./Panel.1435ce07.js";import"./EditorReadOnly.f0e86aff.js";import"./Alert.68363348.js";import"./Refresh.1865b3fa.js";import"./SearchInput.2b4b1fa0.js";import"./NoResult.f7bfb2e6.js";import"./ArrowTopRightOnSquare.9c303ffa.js";import"./ColorPicker.a1464b4a.js";import"./Trash.108c227d.js";import"./PureButtonLink.52cd3818.js";import"./EllipsisVertical.6eb78bb2.js";import"./Checkbox.1a8805b0.js";function R(s,t){$(2,arguments);var e=T(s),a=I(t);return isNaN(a)?new Date(NaN):(a&&e.setDate(e.getDate()+a),e)}function ae(s,t){$(2,arguments);var e=T(s),a=I(t);if(isNaN(a))return new Date(NaN);if(!a)return e;var r=e.getDate(),o=new Date(e.getTime());o.setMonth(e.getMonth()+a+1,0);var m=o.getDate();return r>=m?o:(e.setFullYear(o.getFullYear(),o.getMonth(),r),e)}function re(s,t){var e,a,r,o,m,n,c,_;$(1,arguments);var f=me(),D=I((e=(a=(r=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(m=t.locale)===null||m===void 0||(n=m.options)===null||n===void 0?void 0:n.weekStartsOn)!==null&&r!==void 0?r:f.weekStartsOn)!==null&&a!==void 0?a:(c=f.locale)===null||c===void 0||(_=c.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&e!==void 0?e:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=T(s),w=g.getDay(),v=(w<D?7:0)+w-D;return g.setDate(g.getDate()-v),g.setHours(0,0,0,0),g}var Be=6e4;function Y(s,t){$(2,arguments);var e=I(t);return xe(s,e*Be)}function we(s,t){$(2,arguments);var e=I(t),a=e*7;return R(s,a)}function de(s){$(1,arguments);var t=T(s);return t.setDate(1),t.setHours(0,0,0,0),t}function He(s,t){var e,a,r,o,m,n,c,_;$(1,arguments);var f=me(),D=I((e=(a=(r=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(m=t.locale)===null||m===void 0||(n=m.options)===null||n===void 0?void 0:n.weekStartsOn)!==null&&r!==void 0?r:f.weekStartsOn)!==null&&a!==void 0?a:(c=f.locale)===null||c===void 0||(_=c.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&e!==void 0?e:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=T(s),w=g.getDay(),v=(w<D?-7:0)+6-(w-D);return g.setDate(g.getDate()+v),g.setHours(23,59,59,999),g}function X(s){$(1,arguments);var t=T(s),e=t.getDate();return e}function Ee(s){$(1,arguments);var t=T(s),e=t.getDay();return e}function Le(s){$(1,arguments);var t=T(s),e=t.getFullYear(),a=t.getMonth(),r=new Date(0);return r.setFullYear(e,a+1,0),r.setHours(0,0,0,0),r.getDate()}function Ue(s){$(1,arguments);var t=T(s),e=t.getHours();return e}function G(s){$(1,arguments);var t=T(s),e=t.getMonth();return e}function Ye(s){$(1,arguments);var t=T(s),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function Q(s){return $(1,arguments),T(s).getFullYear()}function ze(s,t){$(2,arguments);var e=I(t);return R(s,-e)}function De(s,t){$(2,arguments);var e=I(t);return ae(s,-e)}function Re(s,t){$(2,arguments);var e=I(t);return we(s,-e)}const Je={class:"text-gray-700 font-semibold text-lg"},Ke={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0}},setup(s){const{translatedFormat:t}=ee(),e=s,a=p(()=>t(e.selectedDate,"MMMM yyyy"));return(r,o)=>(l(),d("div",Je,S(a.value),1))}},Ge={class:"flex items-center"},Qe={class:"flex items-center"},Xe={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(s,{emit:t}){const e=s,a=t,r=()=>{let n=de(De(e.selectedDate,1));a("dateSelected",n)},o=()=>{const n=typeof e.currentDate=="string"?V(e.currentDate):e.currentDate;a("dateSelected",n)},m=()=>{let n=de(ae(e.selectedDate,1));a("dateSelected",n)};return(n,c)=>(l(),d("div",Ge,[u(z,{onClick:o,class:"mr-xs"},{default:O(()=>[B(S(n.$t("calendar.today")),1)]),_:1}),y("div",Qe,[u(U,{onClick:r,class:"mr-xs"},{default:O(()=>[u(he)]),_:1}),u(U,{onClick:m},{default:O(()=>[u(_e)]),_:1})])]))}},et={class:"grid grid-cols-7"},tt={class:"hidden sm:block"},st={class:"block sm:hidden"},at={__name:"Weekdays",props:{weekStartsOn:{required:!1,type:Number,default:0}},setup(s){const t=s,e=p(()=>{const a=C.exports.clone(ge);return a.splice(t.weekStartsOn?0:6).concat(a)});return(a,r)=>(l(),d("div",et,[(l(!0),d(M,null,F(e.value,(o,m)=>(l(),d("div",{key:m,class:"p-sm border-t border-r last:border-r-0 border-gray-200 text-center font-semibold"},[y("span",tt,S(a.$t(`calendar.weekdays.${o.key}.short`)),1),y("span",st,S(a.$t(`calendar.weekdays.${o.key}.shortest`)),1)]))),128))]))}},rt={key:0,class:"flex flex-col h-full"},nt={class:"w-full h-full p-1 md:p-sm bg-white"},ot={class:"text-left text-sm md:text-base"},lt={key:0,class:"flex flex-wrap gap-xs items-center mt-xs"},it={class:"flex items-center justify-between mt-xs"},ct={class:"flex items-center text-gray-500"},dt={class:"text-sm"},ut={class:"mr-xs"},ke={__name:"CalendarPostItem",props:{item:{type:Object,required:!0}},setup(s){const t=s,e=A("calendarFilter"),{timeFormat:a}=fe(),{getOriginalVersion:r,getAccountVersion:o}=je(),{setupURLMetaForAllVersions:m}=Ie(),n=p(()=>{if(!t.item.versions.length)return{excerpt:""};let w=t.item.accounts;e.value.accounts.length&&(w=w.filter(i=>e.value.accounts.includes(i.id)));const v=w.map(i=>{const k=o(t.item.versions,i.id);return k?k.content[0]:r(t.item.versions).content[0]});return{excerpt:(v.length?v[0]:t.item.versions[0].content[0]).excerpt}}),c=p(()=>C.exports.uniqBy(t.item.accounts,"provider")),_=p(()=>a===12?ye(t.item.scheduled_at.time):t.item.scheduled_at.time),f=j(!1),D=()=>{f.value=!0,m(t.item.versions)},g=()=>{f.value=!1};return(w,v)=>{const h=$e("tooltip");return l(),d(M,null,[y("div",{class:"w-full relative flex rounded-md overflow-hidden border border-gray-200 hover:border-primary-500 transition-colors ease-in-out duration-200",onClick:D,role:"button","aria-pressed":"false",tabindex:"0"},[s.item.tags.length?(l(),d("div",rt,[(l(!0),d(M,null,F(s.item.tags,i=>(l(),d("div",{class:"w-sm h-full first:rounded-tl-md last:rounded-bl-md",style:te({backgroundColor:i.hex_color})},null,4))),256))])):q("",!0),y("div",nt,[y("div",ot,S(n.value.excerpt),1),c.value.length?(l(),d("div",lt,[(l(!0),d(M,null,F(c.value,i=>(l(),d("div",{key:i.id},[be(u(Pe,{provider:i.provider,class:"!w-4 !h-4"},null,8,["provider"]),[[h,`${i.name}`]])]))),128))])):q("",!0),y("div",it,[y("div",ct,[u(Ae,{class:"hidden md:block mr-1 !w-5 !h-5"}),y("span",dt,S(_.value),1)]),u(ce,{value:s.item.status,showName:!1,class:"hidden md:block"},null,8,["value"])])])]),u(Oe,{show:f.value,scrollableBody:!0,onClose:g},{body:O(()=>[u(ce,{value:s.item.status,class:"mb-lg"},null,8,["value"]),f.value?(l(),P(Ne,{key:0,accounts:s.item.accounts,versions:s.item.versions},null,8,["accounts","versions"])):q("",!0)]),footer:O(()=>[f.value?(l(),d(M,{key:0},[y("div",ut,[u(We,{"item-id":s.item.id},null,8,["item-id"])]),u(z,{onClick:g},{default:O(()=>[B(S(w.$t("general.close")),1)]),_:1})],64)):q("",!0)]),_:1},8,["show"])],64)}}},Se="/vendor/mixpost/assets/calendar-disabled-item.e7fcf298.svg",mt={class:"absolute w-full top-0 left-0 mt-xs text-center"},yt={key:0,class:"absolute mt-xs right-0 mr-sm opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},vt={key:1,class:"mt-xl pb-xl h-full overflow-hidden"},pt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},ft={class:"flex flex-wrap space-y-xs w-full"},ht={__name:"MonthDayItem",props:{day:{type:Object,required:!0},isToday:{type:Boolean,default:!1},timeZone:{required:!1,type:String,default:"UTC"}},setup(s){const t=A("workspaceCtx"),e=s,a=p(()=>b(new Date(`${e.day.date}T00:00:00`),"d")),r=p(()=>e.day.isDisabled?{backgroundImage:`url('${Se}')`}:{}),o=()=>{const m=W.utcToZonedTime(new Date().toISOString(),e.timeZone);let n=`${e.day.date} ${b(m,"HH:mm")}`;se.visit(route("br.posts.create",{workspace:t.id,schedule_at:n}))};return(m,n)=>(l(),d("div",{class:"relative min-h-[100px] overflow-hidden bg-white border-r border-b border-gray-200 group",style:te(r.value)},[y("div",mt,[y("span",{class:H(["w-7 h-7 inline-flex items-center justify-center p-1 mr-xs rounded-full text-gray-700",{"bg-primary-500 text-white":s.isToday,"text-gray-400":s.day.isDisabled}])},S(a.value),3)]),s.day.isDisabled?q("",!0):(l(),d("div",yt,[y("button",{onClick:o,type:"button",class:"text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[u(ve)])])),s.day.posts.length?(l(),d("div",vt,[y("div",pt,[y("div",ft,[(l(!0),d(M,null,F(s.day.posts,c=>(l(),P(ke,{key:c.id,item:c},null,8,["item"]))),128))])])])):q("",!0)],4))}},_t={class:"bg-white"},gt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},wt={class:"flex items-center space-x-xs mb-xs md:mb-0"},Dt={class:"calendar-month-height grid grid-cols-7 relative border-t border-t-gray-200"},kt={__name:"CalendarMonth",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:s=>b(W.utcToZonedTime(new Date().toISOString(),s.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(s,{emit:t}){const e=s,a=t,r=j(new Date(`${e.initialDate}T00:00:00`)),o=p(()=>[...f.value,...D.value,...g.value]),m=p(()=>b(W.utcToZonedTime(new Date().toISOString(),e.timeZone),"yyyy-MM-dd")),n=p(()=>(G(r.value)+1).toString().padStart(2,"0")),c=p(()=>Q(r.value)),_=p(()=>Le(r.value)),f=p(()=>{const i=w(D.value[0].date),k=i?i-e.weekStartsOn:e.weekStartsOn?6:0,x=X(ze(new Date(`${D.value[0].date}T00:00:00`),k)),N=De(r.value,1);return[...Array(k)].map((E,L)=>{const J=new Date(`${Q(N)}-${(G(N)+1).toString().padStart(2,"0")}-${(x+L).toString().padStart(2,"0")}T00:00:00`);return{date:b(J,"yyyy-MM-dd"),isDisabled:ne(J,e.timeZone),posts:v(J)}})}),D=p(()=>[...Array(_.value)].map((i,k)=>{const x=new Date(`${c.value}-${n.value}-${(k+1).toString().padStart(2,"0")}T00:00:00`);return{date:b(x,"yyyy-MM-dd"),isDisabled:ne(x,e.timeZone),posts:v(x)}})),g=p(()=>{const i=w(Ye(r.value)),k=i&&(e.weekStartsOn?7:6)-i,x=ae(r.value,1);return[...Array(k)].map((N,E)=>{const L=new Date(`${Q(x)}-${(G(x)+1).toString().padStart(2,"0")}-${(E+1).toString().padStart(2,"0")}T00:00:00`);return{date:b(L,"yyyy-MM-dd"),isDisabled:!1,posts:v(L)}})}),w=i=>Ee(typeof i=="string"?new Date(`${i}T00:00:00`):i),v=i=>e.posts.filter(k=>b(i,"yyyy-MM-dd")===k.scheduled_at.date),h=i=>{r.value=i,a("dateSelected",i)};return(i,k)=>(l(),d("div",_t,[y("div",gt,[y("div",wt,[u(Xe,{"current-date":m.value,"selected-date":r.value,onDateSelected:h},null,8,["current-date","selected-date"]),u(Ke,{"selected-date":r.value},null,8,["selected-date"])]),pe(i.$slots,"header")]),u(at,{weekStartsOn:s.weekStartsOn},null,8,["weekStartsOn"]),y("div",Dt,[(l(!0),d(M,null,F(o.value,x=>(l(),P(ht,{key:x.date,day:x,isToday:x.date===m.value,timeZone:s.timeZone},null,8,["day","isToday","timeZone"]))),128))])]))}},St={class:"text-gray-700 font-semibold text-lg"},xt={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0},weekStartsOn:{required:!1,type:Number,default:0}},setup(s){const t=s,{translatedFormat:e}=ee(),a=p(()=>{const r=re(t.selectedDate,{weekStartsOn:t.weekStartsOn}),o=He(t.selectedDate,{weekStartsOn:t.weekStartsOn});return`${e(r,"MMM do")} - ${e(o,"MMM do")}`});return(r,o)=>(l(),d("div",St,S(a.value),1))}},$t={class:"flex items-center"},bt={class:"flex items-center"},Ot={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(s,{emit:t}){const e=s,a=t,r=()=>{let n=Re(e.selectedDate,1);a("dateSelected",n)},o=()=>{const n=typeof e.currentDate=="string"?V(e.currentDate):e.currentDate;a("dateSelected",n)},m=()=>{let n=we(e.selectedDate,1);a("dateSelected",n)};return(n,c)=>(l(),d("div",$t,[u(z,{onClick:o,class:"mr-xs"},{default:O(()=>[B(S(n.$t("calendar.today")),1)]),_:1}),y("div",bt,[u(U,{onClick:r,class:"mr-xs"},{default:O(()=>[u(he)]),_:1}),u(U,{onClick:m},{default:O(()=>[u(_e)]),_:1})])]))}},Mt={class:"flex flex-row sticky top-0 bg-white z-10"},Tt={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Ct=y("div",null,null,-1),Zt={class:"text-base md:text-xl"},qt={class:"hidden sm:block"},Ft={class:"block sm:hidden"},It={__name:"Weekdays",props:{timeZone:{required:!1,type:String,default:"UTC"},weekStartsOn:{required:!1,type:Number,default:0},selectedDate:{type:Date,required:!0},scrolled:{type:Boolean,required:!1,default:!1}},setup(s){const t=s,e=p(()=>re(t.selectedDate,{weekStartsOn:t.weekStartsOn})),a=p(()=>X(W.utcToZonedTime(new Date().toISOString(),t.timeZone))),r=p(()=>{const o=C.exports.clone(ge);return o.splice(t.weekStartsOn?0:6).concat(o).map((n,c)=>{const _=c===0?e.value:R(e.value,c),f=X(_);return Object.assign(n,{date:f,isToday:a.value===f})})});return(o,m)=>(l(),d("div",Mt,[y("div",Tt,[Ct,(l(!0),d(M,null,F(r.value,(n,c)=>(l(),d("div",{key:c,class:H([{"text-primary-500":n.isToday,"border-b-gray-200":s.scrolled,"border-b-white":!s.scrolled},"p-xs border-t border-b border-l border-gray-200 text-center font-semibold"])},[y("div",Zt,S(n.date),1),y("span",{class:H({"text-gray-500":!n.isToday})},[y("span",qt,S(o.$t(`calendar.weekdays.${n.key}.short`)),1),y("span",Ft,S(o.$t(`calendar.weekdays.${n.key}.shortest`)),1)],2)],2))),128))])]))}},Nt={key:0,class:"absolute mt-xs right-0 mr-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},jt={class:"mr-xs text-sm"},Pt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},Wt={class:"flex flex-wrap space-y-xs w-full"},Vt={__name:"WeekDayTimeItem",props:{dateSlot:{type:String,required:!0},timeSlot:{type:String,required:!0},minuteSlot:{type:Object,required:!0},timeZone:{required:!1,type:String,default:"UTC"},timeFormat:{required:!1,type:Number,default:12},posts:{type:Array,required:!0}},setup(s){const t=A("workspaceCtx"),e=s,{translatedFormat:a}=ee(),r=p(()=>{const c=Y(V(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.end);return Me(c,e.timeZone)}),o=p(()=>{const c=Y(V(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.start);return a(c,`${e.timeFormat===12?"h:mm aaa":"H:mm"}`)}),m=p(()=>r.value?{backgroundImage:`url('${Se}')`}:{}),n=()=>{let c=`${e.dateSlot} ${e.timeSlot}`;const _=W.utcToZonedTime(new Date().toISOString(),e.timeZone);`${b(_,"yyyy-MM-dd")} ${Ue(_)}:00`===c&&(c=b(_,"yyyy-MM-dd H:mm")),se.visit(route("br.posts.create",{workspace:t.id,schedule_at:c}))};return(c,_)=>(l(),d("div",{class:"relative min-h-[50px] group",style:te(m.value)},[r.value?q("",!0):(l(),d("div",Nt,[y("button",{onClick:n,type:"button",class:"flex items-center text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[y("span",jt,S(o.value),1),u(ve)])])),s.posts.length?(l(),d("div",{key:1,class:H([{"mt-lg":!r.value},"h-full overflow-hidden"])},[y("div",Pt,[y("div",Wt,[(l(!0),d(M,null,F(s.posts,f=>(l(),P(ke,{key:f.id,item:f},null,8,["item"]))),128))])])],2)):q("",!0)],4))}},At={class:"bg-white"},Bt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},Ht={class:"flex items-center space-x-xs mb-xs md:mb-0"},Et={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Lt={class:"text-center text-gray-400 text-sm font-semibold"},Ut={__name:"CalendarWeek",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:s=>b(W.utcToZonedTime(new Date().toISOString(),s.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},timeFormat:{required:!1,type:Number,default:12},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(s,{emit:t}){const e=s,a=t,r=j(new Date(e.initialDate)),o=p(()=>b(W.utcToZonedTime(new Date().toISOString(),e.timeZone),"yyyy-MM-dd")),m=p(()=>re(r.value,{weekStartsOn:e.weekStartsOn})),n=p(()=>C.exports.range(7).map(v=>{const h=v===0?m.value:R(m.value,v);return b(h,"yyyy-MM-dd")})),c=p(()=>{let v=[];for(let h=0;h<24;h++){const i=(h+":00").padStart(5,"0");v.push({12:ye(i,"h aaa"),24:i})}return v}),_=[{start:0,end:59}],f=(v,h,i)=>e.posts.filter(k=>{const x=b(Y(V(`${v} ${h}`),i.start),"kk:mm"),N=b(Y(V(`${v} ${h}`),i.end),"kk:mm");return v===k.scheduled_at.date&&k.scheduled_at.time>=x&&k.scheduled_at.time<=N}),D=v=>{r.value=v,a("dateSelected",v)},g=j(!1),w=C.exports.throttle(v=>{g.value=v.target.scrollTop>0},100);return(v,h)=>(l(),d("div",At,[y("div",Bt,[y("div",Ht,[u(Ot,{currentDate:o.value,selectedDate:r.value,onDateSelected:D},null,8,["currentDate","selectedDate"]),u(xt,{selectedDate:r.value,weekStartsOn:s.weekStartsOn},null,8,["selectedDate","weekStartsOn"])]),pe(v.$slots,"header")]),y("div",{onScroll:h[0]||(h[0]=(...i)=>Z(w)&&Z(w)(...i)),class:"calendar-week-height-sm md:calendar-week-height-md xl:calendar-week-height overflow-y-auto"},[u(It,{timeZone:s.timeZone,weekStartsOn:s.weekStartsOn,selectedDate:r.value,scrolled:g.value},null,8,["timeZone","weekStartsOn","selectedDate","scrolled"]),y("div",Et,[(l(!0),d(M,null,F(c.value,i=>(l(),d(M,null,[(l(),d(M,null,F(_,(k,x)=>(l(),d(M,null,[y("div",Lt,S(x===0?i[s.timeFormat]:""),1),(l(!0),d(M,null,F(n.value,(N,E)=>(l(),d("div",{key:E,class:H([{"!border-t-gray-100":x!==0},"grid grid-cols-1 border-l border-t border-gray-200 text-center bg-white"])},[u(Vt,{dateSlot:N,timeSlot:i[24],minuteSlot:k,timeZone:s.timeZone,timeFormat:s.timeFormat,posts:f(N,i[24],k)},null,8,["dateSlot","timeSlot","minuteSlot","timeZone","timeFormat","posts"])],2))),128))],64))),64))],64))),256))])],32)]))}},Yt={},zt={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Rt=y("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1),Jt=[Rt];function Kt(s,t){return l(),d("svg",zt,Jt)}const Gt=Te(Yt,[["render",Kt]]),Qt={class:"inline-block mr-xs"},Xt={__name:"CalendarSwitchType",setup(s){const t=A("calendarType"),e=a=>{t.value=a};return(a,r)=>(l(),P(Ce,{"width-classes":"w-32",placement:"bottom"},{trigger:O(()=>[u(z,{size:"sm"},{default:O(()=>[y("span",Qt,S(Z(t)==="month"?a.$t("calendar.month"):a.$t("calendar.week")),1),u(Gt)]),_:1})]),content:O(()=>[u(oe,{as:"button",onClick:r[0]||(r[0]=o=>e("month"))},{default:O(()=>[u(le,{class:"!w-5 !h-5 mr-1"}),B(" "+S(a.$t("calendar.month")),1)]),_:1}),u(oe,{as:"button",onClick:r[1]||(r[1]=o=>e("week"))},{default:O(()=>[u(le,{class:"!w-5 !h-5 mr-1"}),B(" "+S(a.$t("calendar.week")),1)]),_:1})]),_:1}))}},es={class:"flex items-center space-x-md"},ue={__name:"CalendarToolbar",setup(s){const t=A("calendarFilter");return(e,a)=>(l(),d("div",es,[u(Xt),u(Ve,{modelValue:Z(t),"onUpdate:modelValue":a[0]||(a[0]=r=>Ze(t)?t.value=r:null)},null,8,["modelValue"])]))}},$s={__name:"Calendar",props:{posts:{required:!0,type:Object},type:{required:!0,type:String},selected_date:{required:!0,type:[String,Date]},filter:{type:Object,default:{}}},setup(s){const t=s,e=A("workspaceCtx"),{timeZone:a,timeFormat:r,weekStartsOn:o}=fe(),m=j(t.type),n=j(t.selected_date),c=j({keyword:t.filter.keyword,status:t.filter.status,tags:t.filter.tags,accounts:t.filter.accounts});K("calendarType",m),K("calendarFilter",c);const _=qe({urlMeta:{}});K("postCtx",_);const f=p(()=>m.value==="month"),D=p(()=>m.value==="week"),g=h=>{const i=b(h,"yyyy-MM-dd");n.value=i,v(Object.assign({date:i},C.exports.pickBy(c.value)))};ie(m,()=>{w(Object.assign({date:n.value,type:m.value},C.exports.pickBy(c.value)))}),ie(()=>C.exports.cloneDeep(c.value),C.exports.throttle(()=>{w(Object.assign({date:n.value},C.exports.pickBy(c.value)))},300));const w=h=>{se.get(route("br.calendar",Object.assign({workspace:e.id},h)),{},{preserveState:!0,only:["posts"]})},v=C.exports.throttle(h=>{w(h)},300);return(h,i)=>(l(),d(M,null,[u(Z(Fe),{title:h.$t("post.schedule")},null,8,["title"]),f.value?(l(),P(kt,{key:0,initialDate:n.value,weekStartsOn:Z(o),timeZone:Z(a),posts:s.posts.data,onDateSelected:g},{header:O(()=>[u(ue)]),_:1},8,["initialDate","weekStartsOn","timeZone","posts"])):q("",!0),D.value?(l(),P(Ut,{key:1,initialDate:n.value,weekStartsOn:Z(o),timeZone:Z(a),timeFormat:Z(r),posts:s.posts.data,onDateSelected:g},{header:O(()=>[u(ue)]),_:1},8,["initialDate","weekStartsOn","timeZone","timeFormat","posts"])):q("",!0)],64))}};export{$s as default};
