import{i as b,I as C,l as N,ao as Y,o as w,c as V,a as t,w as e,f as r,t as l,u as P,T as B,a5 as Z,b as s,S,k as A,ac as D,F as U,n as L,R as G,g as x,r as H,e as g,cs as J,an as K,V as Q,ah as X,ag as O,ak as I,al as W,d as ee,j as te,Z as se,h as R,Y as ae,_ as T,aW as oe}from"./app.3dbb9f4f.js";import{_ as le}from"./Admin.8227e551.js";import{_ as re}from"./PageHeader.5278f6a5.js";import{_ as j}from"./Panel.1435ce07.js";import{T as E}from"./Trash.108c227d.js";import{_ as ne}from"./NoResult.f7bfb2e6.js";import{_ as ce}from"./DropdownButton.3e12eb5b.js";import{a as z,_ as p,T as ie}from"./TableCell.4ea0e0fc.js";import{_ as F}from"./UserRole.dfe6aafa.js";import{E as ue}from"./Eye.96ec91e4.js";import{_ as de}from"./PureButtonLink.52cd3818.js";import{A as me}from"./ArrowTopRightOnSquare.9c303ffa.js";import{_ as pe}from"./ClipboardCard.c684d070.js";import"./QueueList.71914ee1.js";import"./Flex.781629fc.js";import"./EllipsisVertical.6eb78bb2.js";import"./Radio.02f44a14.js";import"./ClipboardButton.376defca.js";import"./Clipboard.92827572.js";const fe={class:"relative"},_e={__name:"SelectUser",props:{modelValue:{default:null},users:{type:Array,default:[]},exclude:{type:Array,default:[]},filter:{type:Object,default:{}}},emits:["update:modelValue"],setup(n,{emit:a}){const _=n,v=b("routePrefix"),i=C(_.users),c=(o,d)=>{!o||(d(!0),k(d,o))},k=N.exports.throttle((o,d)=>{axios.get(route(`${v}.users.resources.items`),{params:Object.assign({keyword:d,exclude:_.exclude},_.filter)}).then(f=>{o(!1),i.value=f.data.data.map(h=>({key:h.id,label:h.name}))})},350);return(o,d)=>{const f=Y("v-select");return w(),V("div",fe,[t(f,{modelValue:n.modelValue,"onUpdate:modelValue":d[0]||(d[0]=h=>o.$emit("update:modelValue",h)),options:i.value,filterable:!1,"close-on-select":!0,placeholder:o.$t("user.type_search_user"),onSearch:c},{"no-options":e(({search:h,searching:$,loading:u})=>[r(l(o.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])])}}},ke={__name:"AttachUser",props:{workspace:{type:Object},attachedUsers:{type:Array,default:[]}},setup(n){const{t:a}=P();b("routePrefix");const{notify:_}=L(),v=n,i=C(null),c=B({user_id:null,role:"admin"}),k=()=>{c.transform(h=>({...h,user_id:i.value.key})).post(route("br.workspaces.users.store",{workspace:v.workspace.uuid}),{preserveScroll:!0,onSuccess(){f(),c.reset(),_("success",a("team.user_attached"))}})},o=C(!1),d=()=>{o.value=!0},f=()=>{o.value=!1,i.value=null};return(h,$)=>(w(),V(U,null,[t(S,{onClick:d,size:"sm"},{default:e(()=>[t(Z,{class:"mr-xs"}),r(" "+l(s(a)("team.attach")),1)]),_:1}),t(D,{show:o.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:f},{header:e(()=>[r(l(s(a)("team.attach_user")),1)]),body:e(()=>[t(_e,{modelValue:i.value,"onUpdate:modelValue":$[0]||($[0]=u=>i.value=u),exclude:n.attachedUsers},null,8,["modelValue","exclude"]),t(F,{modelValue:s(c).role,"onUpdate:modelValue":$[1]||($[1]=u=>s(c).role=u),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[t(S,{onClick:f,class:"mr-xs"},{default:e(()=>[r(l(s(a)("general.cancel")),1)]),_:1}),t(A,{onClick:k,disabled:!i.value||s(c).processing,isLoading:s(c).processing},{default:e(()=>[r(l(s(a)("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},he={class:"flex justify-start"},we={class:"capitalize"},ge={class:"flex justify-end"},ve={__name:"WorkspaceUsers",props:{workspace:{type:Object}},setup(n){const{t:a}=P(),_=b("routePrefix"),v=b("confirmation"),{notify:i}=L(),c=n,k=C(null),o=B({user_id:null,role:"admin"}),d=u=>{o.user_id=u.id,o.role=u.pivot.role,k.value=u},f=()=>{k.value=null,o.reset()},h=u=>{v().title("Detach user").description(`Are you sure you want to detach <strong>${u.name}</strong> from <strong>${c.workspace.name}</strong>?`).destructive().btnConfirmName(a("general.detach")).onConfirm(y=>{y.isLoading(!0),W.delete(route("br.workspaces.users.delete",{workspace:c.workspace.uuid}),{data:{user_id:u.id},preserveScroll:!0,onSuccess(){y.reset(),i("success",a("team.user_detached"))},onFinish(){y.isLoading(!1)}})}).show()},$=()=>{o.put(route("br.workspaces.users.update",{workspace:c.workspace.uuid}),{preserveScroll:!0,onSuccess(){o.reset(),f(),i("success",a("team.role_updated"))}})};return(u,y)=>{const q=G("tooltip");return w(),V(U,null,[t(j,null,{title:e(()=>[r("Users")]),action:e(()=>[t(ke,{workspace:n.workspace,attachedUsers:n.workspace.users.map(m=>m.id)},null,8,["workspace","attachedUsers"])]),default:e(()=>[n.workspace.users.length?(w(),x(ie,{key:0},{head:e(()=>[t(z,null,{default:e(()=>[t(p,{component:"th",scope:"col"}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("general.name")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("general.email")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("team.role")),1)]),_:1}),t(p,{component:"th",scope:"col"},{default:e(()=>[r(l(s(a)("team.attached_at")),1)]),_:1}),t(p,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(w(!0),V(U,null,H(s(N.exports.sortBy)(n.workspace.users,"pivot.joined_at"),m=>(w(),x(z,{key:n.workspace.id,hoverable:!0},{default:e(()=>[t(p,{align:"left"},{default:e(()=>[g("div",he,[t(J,{name:m.name},null,8,["name"])])]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.name),1)]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.email),1)]),_:2},1024),t(p,null,{default:e(()=>[t(K,null,{default:e(()=>[g("span",we,l(m.pivot.role),1)]),_:2},1024)]),_:2},1024),t(p,null,{default:e(()=>[r(l(m.pivot.joined_at),1)]),_:2},1024),t(p,{align:"right"},{default:e(()=>[g("div",ge,[Q((w(),x(de,{href:u.route(`${s(_)}.users.view`,{user:m.id}),class:"mr-xs"},{default:e(()=>[t(ue)]),_:2},1032,["href"])),[[q,s(a)("general.view")]]),t(X,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ce)]),content:e(()=>[t(O,{onClick:M=>d(m),as:"button"},{default:e(()=>[t(I,{class:"mr-xs"}),r(" "+l(s(a)("team.edit_role")),1)]),_:2},1032,["onClick"]),t(O,{onClick:M=>h(m),as:"button"},{default:e(()=>[t(E,{class:"text-red-500 mr-xs"}),r(" "+l(s(a)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(w(),x(ne,{key:1}))]),_:1}),t(D,{show:k.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:f},{header:e(()=>[r(l(s(a)("team.edit_role_for"))+" ",1),g("strong",null,l(k.value.name),1)]),body:e(()=>[t(F,{modelValue:s(o).role,"onUpdate:modelValue":y[0]||(y[0]=m=>s(o).role=m),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[t(S,{onClick:f,class:"mr-xs"},{default:e(()=>[r(l(s(a)("general.cancel")),1)]),_:1}),t(A,{onClick:$,disabled:s(o).processing,isLoading:s(o).processing},{default:e(()=>[r(l(s(a)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},$e={class:"w-full mx-auto row-py"},ye={class:"flex items-center"},be={class:"row-px"},xe={class:"mt-lg"},Ve=ee({layout:le}),Me=Object.assign(Ve,{__name:"View",props:{workspace:{type:Object}},setup(n){const{t:a}=P(),_=b("routePrefix"),v=b("confirmation"),i=n,{notify:c}=L(),k=()=>{v().title(a("workspace.delete_workspace")).description(a("workspace.confirm_delete_workspace")).destructive().onConfirm(o=>{o.isLoading(!0),W.delete(route(`${_}.workspaces.delete`,{workspace:i.workspace.uuid}),{onSuccess(){c("success",a("workspace.workspace_deleted"))}})}).show()};return(o,d)=>(w(),V(U,null,[t(s(se),{title:s(a)("workspace.view_workspace")},null,8,["title"]),g("div",$e,[t(re,{title:s(a)("workspace.view_workspace")},{description:e(()=>[r(l(n.workspace.name),1)]),default:e(()=>[g("div",ye,[t(s(R),{href:o.route("br.switchWorkspace",{workspace:n.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:e(()=>[t(S,{size:"sm"},{icon:e(()=>[t(me)]),default:e(()=>[r(" "+l(s(a)("general.open")),1)]),_:1})]),_:1},8,["href"]),t(s(R),{href:o.route(`${s(_)}.workspaces.edit`,{workspace:n.workspace.uuid}),class:"mr-xs"},{default:e(()=>[t(A,{size:"sm"},{icon:e(()=>[t(I)]),default:e(()=>[r(" "+l(s(a)("general.edit")),1)]),_:1})]),_:1},8,["href"]),t(ae,{onClick:k,size:"sm"},{icon:e(()=>[t(E)]),_:1})])]),_:1},8,["title"]),g("div",be,[t(j,null,{title:e(()=>[r(l(s(a)("general.details")),1)]),default:e(()=>[t(T,null,{title:e(()=>[r(l(s(a)("general.name")),1)]),default:e(()=>[g("div",null,l(n.workspace.name),1)]),_:1}),t(T,{class:"mt-lg"},{title:e(()=>[r(l(s(a)("general.color")),1)]),default:e(()=>[g("div",{style:oe({background:n.workspace.hex_color}),class:"w-xl h-xl rounded-md"},null,4)]),_:1})]),_:1}),g("div",xe,[t(ve,{workspace:n.workspace},null,8,["workspace"])]),o.$page.props.mixpost.features.api_access_tokens?(w(),x(j,{key:0,class:"mt-lg"},{title:e(()=>[r(l(s(a)("system.usage_api")),1)]),default:e(()=>[t(pe,null,{default:e(()=>[r(l(n.workspace.uuid),1)]),_:1})]),_:1})):te("",!0)])])],64))}});export{Me as default};
