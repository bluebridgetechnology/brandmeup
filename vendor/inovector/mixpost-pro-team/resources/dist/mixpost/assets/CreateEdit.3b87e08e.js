import{d as M,u as P,i as y,N as q,I as b,T as A,J as F,c as S,a as s,b as e,e as d,w as o,m as R,ac as W,F as U,l as D,o as k,Z as H,h as V,S as v,f as l,t as n,Y as J,j as h,_ as T,ab as Y,$ as Z,aW as G,k as E,g as L,cu as K,al as Q,n as X}from"./app.3dbb9f4f.js";import{_ as ee}from"./Admin.8227e551.js";import{u as oe}from"./usePageMode.55077520.js";import{_ as se}from"./PageHeader.5278f6a5.js";import{_ as ae}from"./Panel.1435ce07.js";import{_ as te}from"./ColorPicker.a1464b4a.js";import{E as re}from"./Eye.96ec91e4.js";import{T as le}from"./Trash.108c227d.js";import{A as ne}from"./ArrowTopRightOnSquare.9c303ffa.js";import{_ as ce}from"./Flex.781629fc.js";import"./QueueList.71914ee1.js";const ue={class:"row-py w-full mx-auto"},ie={key:0,class:"flex"},me={class:"row-px"},de={for:"name"},pe={class:"w-full"},fe=M({layout:ee}),Se=Object.assign(fe,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},workspace:{type:Object}},setup(g){const{t:a}=P(),p=g,{notify:x}=X(),w=y("routePrefix"),N=y("confirmation"),$=q(()=>i.value?a("workspace.create_workspace"):a("workspace.edit_workspace")),{isCreate:i,isEdit:f}=oe(),m=b(!1),_=b(""),c=A({name:f.value?p.workspace.name:"",hex_color:f.value?p.workspace.hex_color:""}),O=()=>{c.hex_color=_.value,m.value=!1},I=()=>{const r=K();return r[D.exports.random(0,r.length-1)]};F(()=>{if(i.value){const r=I();c.hex_color=r,_.value=r}f.value&&(_.value=p.workspace.hex_color)});const C=(r=!1)=>{c.transform(t=>({...t,login:r})).post(route(`${w}.workspaces.store`))},j=()=>{c.put(route(`${w}.workspaces.update`,{workspace:p.workspace.uuid}),{onSuccess:()=>{x("success",a("workspace.workspace_updated"))}})},z=()=>{N().title(a("workspace.delete_workspace")).description(a("workspace.confirm_delete_workspace")).destructive().onConfirm(r=>{r.isLoading(!0),Q.delete(route(`${w}.workspaces.delete`,{workspace:p.workspace.uuid}),{preserveScroll:!0,onSuccess(){x("success",a("workspace.workspace_deleted"))},onFinish(){r.reset()}})}).show()},B=()=>{i.value&&C(),f.value&&j()};return(r,t)=>(k(),S(U,null,[s(e(H),{title:$.value},null,8,["title"]),d("div",ue,[s(se,{title:$.value},{default:o(()=>[e(f)?(k(),S("div",ie,[s(e(V),{href:r.route("br.switchWorkspace",{workspace:g.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(ne)]),default:o(()=>[l(" "+n(e(a)("general.open")),1)]),_:1})]),_:1},8,["href"]),s(e(V),{href:r.route(`${e(w)}.workspaces.view`,{workspace:g.workspace.uuid}),class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(re)]),default:o(()=>[l(" "+n(e(a)("general.view")),1)]),_:1})]),_:1},8,["href"]),s(J,{onClick:z,size:"sm"},{icon:o(()=>[s(le)]),_:1})])):h("",!0)]),_:1},8,["title"]),d("div",me,[d("form",{method:"post",onSubmit:R(B,["prevent"])},[s(ae,null,{title:o(()=>[l(n(e(a)("general.details")),1)]),default:o(()=>[s(T,null,{title:o(()=>[d("label",de,n(e(a)("general.name")),1)]),default:o(()=>[d("div",pe,[s(Y,{modelValue:e(c).name,"onUpdate:modelValue":t[0]||(t[0]=u=>e(c).name=u),type:"text",id:"name",placeholder:e(a)("workspace.workspace_name"),class:"w-full",autocomplete:"off",autofocus:e(i),required:""},null,8,["modelValue","placeholder","autofocus"]),s(Z,{message:e(c).errors.name,class:"mt-1"},null,8,["message"])])]),_:1}),s(T,{class:"mt-lg"},{title:o(()=>[l(" Color ")]),default:o(()=>[d("div",{onClick:t[1]||(t[1]=u=>m.value=!0),style:G({background:e(c).hex_color}),role:"button",type:"button",class:"w-xl h-xl rounded-md"},null,4)]),_:1}),s(ce,{class:"mt-lg"},{default:o(()=>[s(E,{type:"submit"},{default:o(()=>[l(n(e(i)?e(a)("general.create"):e(a)("general.update")),1)]),_:1}),e(i)?(k(),L(v,{key:0,onClick:t[2]||(t[2]=u=>C(!0)),type:"button",class:"ml-xs"},{default:o(()=>[l(n(e(a)("workspace.create_and_login")),1)]),_:1})):h("",!0)]),_:1})]),_:1})],32)])]),s(W,{show:m.value,"max-width":"md",onClose:t[5]||(t[5]=u=>m.value=!1)},{header:o(()=>[l(n(e(a)("workspace.change_workspace_color")),1)]),body:o(()=>[m.value?(k(),L(te,{key:0,modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=u=>_.value=u)},null,8,["modelValue"])):h("",!0)]),footer:o(()=>[s(v,{onClick:t[4]||(t[4]=u=>m.value=!1),class:"mr-xs"},{default:o(()=>[l(n(e(a)("general.cancel")),1)]),_:1}),s(E,{onClick:O},{default:o(()=>[l(n(e(a)("general.done")),1)]),_:1})]),_:1},8,["show"])],64))}});export{Se as default};
