import{i as w,I as V,l as F,ao as I,o as $,c as y,a as s,w as e,f as o,t as a,T,a5 as D,S,b as l,k as j,ac as U,F as x,R as E,g as b,r as M,e as k,cs as q,an as Y,V as Z,ah as G,ag as P,ak as A,al as N,d as H,u as J,a6 as K,Z as Q,h as X,Y as ee,j as se,_ as C,n as te}from"./app.3dbb9f4f.js";import{_ as ae}from"./Admin.8227e551.js";import{_ as oe}from"./PageHeader.5278f6a5.js";import{_ as R}from"./Panel.1435ce07.js";import{T as B}from"./Trash.108c227d.js";import{_ as le}from"./NoResult.f7bfb2e6.js";import{_ as re}from"./DropdownButton.3e12eb5b.js";import{_ as O}from"./UserRole.dfe6aafa.js";import{a as W,_ as h,T as ne}from"./TableCell.4ea0e0fc.js";import{E as ue}from"./Eye.96ec91e4.js";import{_ as ie}from"./PureButtonLink.52cd3818.js";import"./QueueList.71914ee1.js";import"./Flex.781629fc.js";import"./EllipsisVertical.6eb78bb2.js";import"./Radio.02f44a14.js";const ce={class:"relative w-full"},de={__name:"SelectWorkspace",props:{modelValue:{default:null},workspaces:{type:Array,default:[]},exclude:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:n}){const f=r,d=w("routePrefix"),p=V(f.workspaces),i=(u,c)=>{!u||(c(!0),v(c,u))},v=F.exports.throttle((u,c)=>{axios.get(route(`${d}.workspaces.resources.items`),{params:{keyword:c,exclude:f.exclude}}).then(m=>{u(!1),p.value=m.data.data.map(t=>({key:t.uuid,label:t.name}))})},350);return(u,c)=>{const m=I("v-select");return $(),y("div",ce,[s(m,{modelValue:r.modelValue,"onUpdate:modelValue":c[0]||(c[0]=t=>u.$emit("update:modelValue",t)),options:p.value,filterable:!1,"close-on-select":!0,disabled:r.disabled,placeholder:u.$t("workspace.type_search_workspace"),onSearch:i},{"no-options":e(({search:t,searching:g,loading:L})=>[o(a(u.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","disabled","placeholder"])])}}},me={__name:"AttachWorkspace",props:{user:{type:Object},attachedWorkspaces:{type:Array,default:[]}},setup(r){w("routePrefix");const n=r,f=V(null),d=T({user_id:n.user.id,role:"admin"}),p=()=>{d.post(route("br.workspaces.users.store",{workspace:f.value.key}),{preserveScroll:!0,onSuccess(){u(),d.reset()}})},i=V(!1),v=()=>{i.value=!0},u=()=>{i.value=!1,f.value=null};return(c,m)=>($(),y(x,null,[s(S,{onClick:v,size:"sm"},{default:e(()=>[s(D,{class:"mr-xs"}),o(" "+a(c.$t("team.attach")),1)]),_:1}),s(U,{show:i.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:u},{header:e(()=>[o(a(c.$t("team.attach_workspace")),1)]),body:e(()=>[s(de,{modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=t=>f.value=t),exclude:r.attachedWorkspaces},null,8,["modelValue","exclude"]),s(O,{modelValue:l(d).role,"onUpdate:modelValue":m[1]||(m[1]=t=>l(d).role=t),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[s(S,{onClick:u,class:"mr-xs"},{default:e(()=>[o(a(c.$t("general.cancel")),1)]),_:1}),s(j,{onClick:p,disabled:!f.value||l(d).processing,isLoading:l(d).processing},{default:e(()=>[o(a(c.$t("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},fe={class:"flex justify-start"},_e={class:"capitalize"},pe={class:"flex justify-end"},he={__name:"UserWorkspaces",props:{user:{type:Object}},setup(r){const n=w("routePrefix"),f=w("confirmation"),d=r,p=V(null),i=T({user_id:d.user.id,role:"admin"}),v=t=>{i.role=t.pivot.role,p.value=t},u=()=>{p.value=null},c=t=>{f().title($t("team.detach_workspace")).description($t("team.detach_confirm",{workspace:t.name,user:d.user.name})).destructive().btnConfirmName($t("admin.detach")).onConfirm(g=>{g.isLoading(!0),N.delete(route(`${n}.workspaces.users.delete`,{workspace:t.uuid}),{data:{user_id:d.user.id},preserveScroll:!0,onSuccess(){g.reset()},onFinish(){g.isLoading(!1)}})}).show()},m=()=>{i.put(route(`${n}.workspaces.users.update`,{workspace:p.value.uuid}),{data:{user_id:d.user.id},preserveScroll:!0,onSuccess(){i.reset(),u()}})};return(t,g)=>{const L=E("tooltip");return $(),y(x,null,[s(R,null,{title:e(()=>[o(a(t.$t("workspace.workspaces")),1)]),action:e(()=>[s(me,{user:r.user,attachedWorkspaces:r.user.workspaces.map(_=>_.uuid)},null,8,["user","attachedWorkspaces"])]),default:e(()=>[r.user.workspaces.length?($(),b(ne,{key:0},{head:e(()=>[s(W,null,{default:e(()=>[s(h,{component:"th",scope:"col"}),s(h,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("general.name")),1)]),_:1}),s(h,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("team.role")),1)]),_:1}),s(h,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("team.attached_at")),1)]),_:1}),s(h,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[($(!0),y(x,null,M(r.user.workspaces,_=>($(),b(W,{key:_.id,hoverable:!0},{default:e(()=>[s(h,{align:"left"},{default:e(()=>[k("div",fe,[s(q,{backgroundColor:_.hex_color,name:_.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])])]),_:2},1024),s(h,null,{default:e(()=>[k("div",null,a(_.name),1)]),_:2},1024),s(h,null,{default:e(()=>[s(Y,null,{default:e(()=>[k("span",_e,a(_.pivot.role),1)]),_:2},1024)]),_:2},1024),s(h,null,{default:e(()=>[o(a(_.pivot.joined_at),1)]),_:2},1024),s(h,{align:"right"},{default:e(()=>[k("div",pe,[Z(($(),b(ie,{href:t.route(`${l(n)}.workspaces.view`,{workspace:_.uuid}),class:"mr-xs"},{default:e(()=>[s(ue)]),_:2},1032,["href"])),[[L,t.$t("general.view")]]),s(G,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[s(re)]),content:e(()=>[s(P,{onClick:z=>v(_),as:"button"},{default:e(()=>[s(A,{class:"mr-xs"}),o(" "+a(t.$t("team.edit_role")),1)]),_:2},1032,["onClick"]),s(P,{onClick:z=>c(_),as:"button"},{default:e(()=>[s(B,{class:"text-red-500 mr-xs"}),o(" "+a(t.$t("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):($(),b(le,{key:1}))]),_:1}),s(U,{show:p.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:u},{header:e(()=>[o(a(t.$t("team.edit_role_on"))+" ",1),k("strong",null,a(p.value.name),1),o(" "+a(t.$t("workspace.workspaces")),1)]),body:e(()=>[s(O,{modelValue:l(i).role,"onUpdate:modelValue":g[0]||(g[0]=_=>l(i).role=_),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[s(S,{onClick:u,class:"mr-xs"},{default:e(()=>[o(a(t.$t("general.cancel")),1)]),_:1}),s(j,{onClick:m,disabled:l(i).processing,isLoading:l(i).processing},{default:e(()=>[o(a(t.$t("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},$e={class:"w-full mx-auto row-py"},ke={class:"flex items-center"},ve={class:"row-px"},ge={class:"md:max-w-2xl"},we={class:"mt-lg"},be=H({layout:ae}),Oe=Object.assign(be,{__name:"View",props:{user:{type:Object}},setup(r){const{t:n}=J(),f=w("routePrefix"),d=w("confirmation"),p=r,i=n("user.view_user"),{notify:v}=te(),{user:u}=K(),c=()=>{d().title(n("user.delete_users")).description(n("user.confirm_delete_user")).destructive().onConfirm(m=>{m.isLoading(!0),N.delete(route(`${f}.users.delete`,{user:p.user.id}),{onSuccess(t){t.props.flash.error||v("success",n("user.user_deleted"))},onFinish(){m.isLoading(!1)}})}).show()};return(m,t)=>($(),y(x,null,[s(l(Q),{title:l(i)},null,8,["title"]),k("div",$e,[s(oe,{title:l(i)},{description:e(()=>[o(a(r.user.name),1)]),default:e(()=>[k("div",ke,[s(l(X),{href:m.route(`${l(f)}.users.edit`,{user:r.user.id}),class:"mr-xs"},{default:e(()=>[s(j,{size:"sm"},{icon:e(()=>[s(A)]),default:e(()=>[o(" "+a(l(n)("general.edit")),1)]),_:1})]),_:1},8,["href"]),l(u).id!==r.user.id?($(),b(ee,{key:0,onClick:c,size:"sm"},{icon:e(()=>[s(B)]),_:1})):se("",!0)])]),_:1},8,["title"]),k("div",ve,[s(R,null,{title:e(()=>[o(a(l(n)("user.user_details")),1)]),default:e(()=>[k("div",ge,[s(C,null,{title:e(()=>[o(a(l(n)("general.name")),1)]),default:e(()=>[o(" "+a(r.user.name),1)]),_:1}),s(C,{class:"mt-md"},{title:e(()=>[o(a(l(n)("general.email")),1)]),default:e(()=>[o(" "+a(r.user.email),1)]),_:1}),s(C,{class:"mt-md"},{title:e(()=>[o(a(l(n)("general.created_at")),1)]),default:e(()=>[o(" "+a(r.user.created_at),1)]),_:1}),s(C,{class:"mt-md"},{title:e(()=>[o(a(l(n)("user.system_admin")),1)]),default:e(()=>[o(" "+a(r.user.is_admin?l(n)("general.yes"):l(n)("general.no")),1)]),_:1})])]),_:1}),k("div",we,[s(he,{user:r.user},null,8,["user"])])])])],64))}});export{Oe as default};
